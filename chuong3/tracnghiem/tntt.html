<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài Kiểm Tra Từ Trường</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']], // Bắt buộc nhận diện $...$
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      // ...
    };
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
        }
        .quiz-container {
            min-height: 100vh;
        }
        .sidebar {
            background-color: #1f2937; /* Darker blue-gray */
            color: #f9fafb;
        }
        .main-content {
            background-color: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2 px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .nav-button {
            transition: all 0.2s;
            cursor: pointer;
        }
        .nav-button:hover:not(.current) {
            background-color: #4b5563;
        }
        .nav-button.answered {
            background-color: #10b981; /* Green */
            color: white;
        }
        .nav-button.current {
            background-color: #3b82f6; /* Blue */
            color: white;
            transform: scale(1.05);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .result-correct {
            background-color: #d1fae5; /* Light green */
            border-left: 4px solid #10b981;
        }
        .result-incorrect {
            background-color: #fee2e2; /* Light red */
            border-left: 4px solid #ef4444;
        }
        .correct-mark {
            color: #10b981;
            font-weight: bold;
        }
        .explanation-box {
            background-color: #f3f4f6;
            border-radius: 0.375rem;
            padding: 1rem;
            margin-top: 1rem;
            border: 1px solid #e5e7eb;
        }
    </style>
</head>
<body class="selection:bg-blue-200">

    <!-- Cấu hình Dữ liệu Bài Kiểm Tra -->
    <script>
        const quizData = [
            {
                q: "Tính chất cơ bản của từ trường là gì?",
                options: [
                    "Gây ra lực hấp dẫn lên các vật có khối lượng.",
                    "Tác dụng lực từ lên nam châm hoặc dòng điện đặt trong nó.",
                    "Gây ra lực tĩnh điện lên các điện tích đứng yên.",
                    "Làm thay đổi nhiệt độ của môi trường xung quanh."
                ],
                a: 1, // Index 1 is the correct answer
                explanation: "Tính chất cơ bản nhất của từ trường là tác dụng lực từ lên nam châm hay dòng điện đặt trong nó. Đây là định nghĩa về từ trường."
            },
            {
                q: "Đường sức từ có đặc điểm nào sau đây?",
                options: [
                    "Là những đường cong hở, có chiều đi từ cực Bắc sang cực Nam.",
                    "Là những đường thẳng song song và cách đều nhau.",
                    "Là những đường cong kín hoặc vô hạn ở hai đầu.",
                    "Luôn cắt nhau tại các điểm có cảm ứng từ mạnh."
                ],
                a: 2,
                explanation: "Đường sức từ là những đường cong khép kín (xung quanh dòng điện hoặc nam châm) hoặc vô hạn ở hai đầu (nam châm thẳng). Chiều của chúng được quy ước."
            },
            {
                q: "Đơn vị đo cảm ứng từ (B) trong hệ SI là gì?",
                options: [
                    "Volt (V)",
                    "Ampe (A)",
                    "Tesla (T)",
                    "Ohm (Ω)"
                ],
                a: 2,
                explanation: "Cảm ứng từ (B) là đại lượng đặc trưng cho độ mạnh yếu của từ trường, đơn vị đo trong hệ SI là Tesla (T)."
            },
            {
                q: "Phát biểu nào sau đây về lực Lorentz là đúng?",
                options: [
                    "Là lực từ tác dụng lên đoạn dây dẫn mang dòng điện.",
                    "Là lực từ tác dụng lên điện tích đặt trong từ trường nhưng đứng yên.",
                    "Là lực từ tác dụng lên điện tích chuyển động trong từ trường.",
                    "Là lực hấp dẫn giữa hai điện tích."
                ],
                a: 2,
                explanation: "Lực Lorentz là lực từ tác dụng lên một hạt mang điện tích $q$ chuyển động với vận tốc $\vec{v}$ trong một từ trường $\vec{B}$."
            },
            {
                q: "Cảm ứng từ tại một điểm trong từ trường gây bởi dòng điện thẳng dài, tỉ lệ thuận với đại lượng nào?",
                options: [
                    "Cường độ dòng điện (I).",
                    "Bình phương cường độ dòng điện ($I^2$).",
                    "Khoảng cách từ điểm đó đến dây dẫn (r).",
                    "Bình phương khoảng cách từ điểm đó đến dây dẫn ($r^2$).",
                ],
                a: 0,
                explanation: "Công thức tính cảm ứng từ do dòng điện thẳng dài gây ra là $B = 2 \cdot 10^{-7} \frac{I}{r}$. Do đó, B tỉ lệ thuận với cường độ dòng điện I."
            },
            {
                q: "Chiều của lực từ tác dụng lên đoạn dây dẫn mang dòng điện được xác định bằng quy tắc nào?",
                options: [
                    "Quy tắc nắm tay phải.",
                    "Quy tắc bàn tay trái.",
                    "Quy tắc đinh ốc.",
                    "Quy tắc truyền thẳng."
                ],
                a: 1,
                explanation: "Quy tắc bàn tay trái được dùng để xác định chiều của lực từ ($\vec{F}$) tác dụng lên đoạn dây dẫn mang dòng điện ($\vec{I}$) đặt trong từ trường ($\vec{B}$)."
            },
            {
                q: "Một hạt electron bay vào từ trường theo phương vuông góc với đường sức từ, quỹ đạo của nó có dạng gì?",
                options: [
                    "Đường thẳng.",
                    "Đường parabol.",
                    "Đường tròn.",
                    "Đường elip."
                ],
                a: 2,
                explanation: "Lực Lorentz luôn vuông góc với vận tốc và đường sức từ, đóng vai trò là lực hướng tâm, khiến hạt chuyển động theo quỹ đạo tròn."
            },
            {
                q: "Lực từ tác dụng lên đoạn dây dẫn có dòng điện đặt song song với đường sức từ có độ lớn bằng bao nhiêu?",
                options: [
                    "Cực đại.",
                    "Bằng nửa giá trị cực đại.",
                    "Bằng không.",
                    "Tùy thuộc vào cường độ dòng điện."
                ],
                a: 2,
                explanation: "Công thức lực từ là $F = I B l \sin \alpha$. Khi dây dẫn song song với đường sức từ, $\alpha = 0^\circ$ hoặc $180^\circ$, suy ra $\sin \alpha = 0$. Do đó, $F = 0$."
            },
            {
                q: "Phát biểu nào sau đây là SAI về cảm ứng từ (B)?",
                options: [
                    "B là đại lượng véc-tơ.",
                    "B có độ lớn không đổi tại mọi điểm trong từ trường đều.",
                    "B cùng chiều với lực từ tác dụng lên dòng điện.",
                    "B có đơn vị là Tesla."
                ],
                a: 2,
                explanation: "Cảm ứng từ ($\vec{B}$) vuông góc với lực từ ($\vec{F}$) và dòng điện ($\vec{I}$) (hoặc vận tốc $\vec{v}$) theo quy tắc bàn tay trái/Lorentz, nên không thể cùng chiều."
            },
            {
                q: "Nam châm hút sắt là biểu hiện của tính chất nào?",
                options: [
                    "Tính chất nhiệt.",
                    "Tính chất điện.",
                    "Tính chất từ.",
                    "Tính chất quang học."
                ],
                a: 2,
                explanation: "Nam châm tác dụng lực lên sắt (một vật liệu từ) là biểu hiện rõ nhất của tính chất từ và sự tồn tại của từ trường xung quanh nam châm."
            },
            {
                q: "Trong một ống dây điện có dòng điện chạy qua, đường sức từ bên trong ống dây có đặc điểm gì?",
                options: [
                    "Là những đường cong kín, không đều.",
                    "Là những đường thẳng song song, cách đều nhau (tạo thành từ trường đều).",
                    "Là những đường thẳng đi xuyên tâm ống dây và tỏa ra ngoài.",
                    "Là những đường tròn đồng tâm."
                ],
                a: 1,
                explanation: "Từ trường bên trong lòng ống dây dài có dòng điện là từ trường đều, có đường sức từ là những đường thẳng song song và cách đều nhau."
            },
            {
                q: "Độ lớn lực Lorentz được tính bằng công thức nào?",
                options: [
                    "$F = k \frac{|q_1 q_2|}{r^2}$",
                    "$F = q E$",
                    "$F = |q| v B \sin \alpha$",
                    "$F = I B l$"
                ],
                a: 2,
                explanation: "Công thức tính độ lớn lực Lorentz là $F = |q| v B \sin \alpha$, trong đó $\alpha$ là góc giữa véc-tơ vận tốc $\vec{v}$ và véc-tơ cảm ứng từ $\vec{B}$."
            },
            {
                q: "Nơi nào không phải là nguồn gốc sinh ra từ trường?",
                options: [
                    "Dòng điện (điện tích chuyển động).",
                    "Nam châm vĩnh cửu.",
                    "Điện tích đứng yên.",
                    "Trái Đất."
                ],
                a: 2,
                explanation: "Điện tích đứng yên chỉ sinh ra điện trường (lực tĩnh điện), không sinh ra từ trường. Từ trường được sinh ra bởi điện tích chuyển động (dòng điện) và nam châm."
            },
            {
                q: "Chiều đường sức từ của nam châm đi ra từ cực nào và đi vào cực nào?",
                options: [
                    "Đi ra cực Bắc (N), đi vào cực Nam (S).",
                    "Đi ra cực Nam (S), đi vào cực Bắc (N).",
                    "Luôn đi từ trên xuống dưới.",
                    "Không có chiều xác định."
                ],
                a: 0,
                explanation: "Quy ước chung: đường sức từ đi ra từ cực Bắc (North - N) và đi vào cực Nam (South - S) của nam châm."
            },
            {
                q: "Lực từ tác dụng lên đoạn dây dẫn có độ lớn cực đại khi nào?",
                options: [
                    "Dây dẫn song song với đường sức từ.",
                    "Dây dẫn vuông góc với đường sức từ.",
                    "Dây dẫn hợp với đường sức từ một góc $30^\circ$.",
                    "Cường độ dòng điện bằng 0."
                ],
                a: 1,
                explanation: "Lực từ $F = I B l \sin \alpha$ đạt cực đại khi $\sin \alpha = 1$, tức là $\alpha = 90^\circ$ (dây dẫn vuông góc với đường sức từ)."
            },
            {
                q: "Đâu là ứng dụng quan trọng của từ trường?",
                options: [
                    "Chế tạo bóng đèn sợi đốt.",
                    "Chế tạo các thiết bị điện như động cơ điện, máy phát điện.",
                    "Chế tạo kính hiển vi.",
                    "Ứng dụng trong phản ứng hóa học."
                ],
                a: 1,
                explanation: "Động cơ điện và máy phát điện hoạt động dựa trên nguyên lý tương tác giữa dòng điện và từ trường (lực từ và hiện tượng cảm ứng điện từ)."
            },
            {
                q: "Nếu một điện tích âm bay vào từ trường $\vec{B}$, chiều của lực Lorentz tác dụng lên nó sẽ như thế nào so với quy tắc bàn tay trái thông thường (áp dụng cho điện tích dương)?",
                options: [
                    "Cùng chiều.",
                    "Ngược chiều.",
                    "Vuông góc.",
                    "Song song."
                ],
                a: 1,
                explanation: "Khi áp dụng quy tắc bàn tay trái cho điện tích âm, chiều của lực Lorentz sẽ ngược chiều với chiều ngón cái chỉ ra (nếu coi chiều dòng điện là chiều chuyển động của hạt)."
            },
            {
                q: "Phát biểu nào sau đây là KHÔNG chính xác khi mô tả từ trường?",
                options: [
                    "Từ trường gây ra lực từ.",
                    "Từ trường có thể làm chệch hướng tia điện tử.",
                    "Từ trường là môi trường vật chất bao quanh điện tích đứng yên.",
                    "Từ trường có thể biến thiên theo thời gian."
                ],
                a: 2,
                explanation: "Từ trường là môi trường vật chất bao quanh *dòng điện* hoặc *nam châm*, còn điện tích đứng yên chỉ sinh ra điện trường."
            },
            {
                q: "Trong từ trường đều, một thanh nam châm kim đặt tự do sẽ định hướng như thế nào?",
                options: [
                    "Vuông góc với đường sức từ.",
                    "Song song với đường sức từ.",
                    "Không định hướng.",
                    "Tùy thuộc vào khối lượng của nam châm."
                ],
                a: 1,
                explanation: "Nam châm kim (đóng vai trò là dòng điện kín) sẽ quay và định hướng song song với đường sức từ tại điểm đó."
            },
            {
                q: "Lực từ và lực tĩnh điện (lực Coulomb) có điểm gì khác biệt cơ bản?",
                options: [
                    "Lực tĩnh điện luôn cùng phương với lực từ.",
                    "Lực từ tác dụng lên mọi vật chất, còn lực tĩnh điện chỉ tác dụng lên điện tích.",
                    "Lực tĩnh điện không phụ thuộc vào trạng thái chuyển động của điện tích, còn lực từ thì có.",
                    "Lực từ luôn có chiều hướng vào tâm, còn lực tĩnh điện thì không."
                ],
                a: 2,
                explanation: "Lực tĩnh điện tác dụng lên điện tích dù đứng yên hay chuyển động ($F=qE$). Lực từ (Lorentz) chỉ tác dụng lên điện tích khi chúng *chuyển động* ($F=|q|vB\sin\alpha$)."
            }
        ];

        // Biến toàn cục
        let userAnswers = Array(quizData.length).fill(null);
        let currentQuestionIndex = 0;
        let timeLeft = 60 * 10; // 10 minutes in seconds
        let timerInterval;
        let isQuizSubmitted = false;
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // Tham chiếu DOM (Khai báo biến, gán giá trị sau khi DOM tải)
        let questionCounter;
        let questionText;
        let optionsContainer;
        let timerDisplay;
        let prevButton;
        let nextButton;
        let navButtonsContainer;
        let submitButton;
        let retakeButton;
        let resultsContainer;
        let finalScore;
        let modal;
        let modalConfirmButton;
        let modalCancelButton;

        // Khởi tạo Quiz
        document.addEventListener('DOMContentLoaded', () => {
            // Gán các tham chiếu DOM sau khi DOM đã sẵn sàng
            questionCounter = document.getElementById('question-counter');
            questionText = document.getElementById('question-text');
            optionsContainer = document.getElementById('options-container');
            timerDisplay = document.getElementById('timer-display');
            prevButton = document.getElementById('prev-button');
            nextButton = document.getElementById('next-button');
            navButtonsContainer = document.getElementById('nav-buttons');
            submitButton = document.getElementById('submit-button');
            retakeButton = document.getElementById('retake-button');
            resultsContainer = document.getElementById('results-container');
            finalScore = document.getElementById('final-score');
            modal = document.getElementById('submit-modal');
            modalConfirmButton = document.getElementById('modal-confirm-submit');
            modalCancelButton = document.getElementById('modal-cancel-submit');

            initializeNavigationButtons();
            loadQuestion(currentQuestionIndex);
            startTimer();

            // Setup Event Listeners
            prevButton.addEventListener('click', () => changeQuestion(-1));
            nextButton.addEventListener('click', () => changeQuestion(1));
            submitButton.addEventListener('click', showSubmitWarning);
            retakeButton.addEventListener('click', resetQuiz);
            modalConfirmButton.addEventListener('click', () => {
                modal.classList.add('hidden');
                submitQuiz();
            });
            modalCancelButton.addEventListener('click', () => {
                modal.classList.add('hidden');
            });

            // Close modal on outside click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                }
            });
        });

        // --- HÀM LOGIC CHÍNH ---

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "HẾT GIỜ";
                    if (!isQuizSubmitted) {
                        // Thay thế alert() bằng console.error() để tránh lỗi iFrame
                        console.error("Hết giờ làm bài! Bài kiểm tra sẽ tự động nộp.");
                        submitQuiz();
                    }
                    return;
                }
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function loadQuestion(index) {
            currentQuestionIndex = index;
            const qData = quizData[index];

            // Cập nhật tiêu đề câu hỏi
            questionCounter.textContent = `Câu hỏi ${index + 1}/${quizData.length}`;
            questionText.textContent = qData.q;
            
            // Xóa và tạo lại các tùy chọn
            optionsContainer.innerHTML = '';
            qData.options.forEach((option, i) => {
                const label = document.createElement('label');
                label.className = `flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition duration-150 ease-in-out ${isQuizSubmitted ? '' : 'hover:bg-blue-50'} ${userAnswers[index] === i ? 'bg-blue-100 border-2 border-blue-500' : 'bg-gray-50'}`;

                // Tạo Input Radio
                const input = document.createElement('input');
                input.type = 'radio';
                input.name = `q${index}`;
                input.value = i;
                input.className = 'form-radio h-4 w-4 text-blue-600 focus:ring-blue-500';
                input.checked = userAnswers[index] === i;
                input.disabled = isQuizSubmitted;
                input.addEventListener('change', (e) => handleAnswerChange(index, i));

                // Tạo Text Option
                const span = document.createElement('span');
                span.className = 'text-gray-700 font-medium text-sm md:text-base';
                span.textContent = option;

                label.appendChild(input);
                label.appendChild(span);

                // Hiển thị kết quả và giải thích sau khi nộp bài
                if (isQuizSubmitted) {
                    if (i === qData.a) {
                        // Đáp án đúng
                        label.classList.remove('bg-gray-50', 'bg-blue-100');
                        label.classList.add('result-correct', 'border-green-500');
                        span.innerHTML += ' <span class="correct-mark">(ĐÁP ÁN ĐÚNG)</span>';
                    } else if (userAnswers[index] === i && i !== qData.a) {
                        // Đáp án sai do người dùng chọn
                        label.classList.remove('bg-gray-50', 'bg-blue-100');
                        label.classList.add('result-incorrect', 'border-red-500');
                        span.innerHTML += ' <span class="text-red-500 font-bold">(BẠN CHỌN SAI)</span>';
                    }
                }
                
                optionsContainer.appendChild(label);
            });

            // Thêm giải thích chi tiết sau khi nộp bài
            if (isQuizSubmitted) {
                const explanationDiv = document.createElement('div');
                explanationDiv.className = 'explanation-box';
                explanationDiv.innerHTML = `<h3 class="font-bold text-lg text-gray-800 mb-2">Giải Đáp Chi Tiết:</h3><p class="text-gray-600">${qData.explanation}</p>`;
                optionsContainer.appendChild(explanationDiv);
            }

            // Cập nhật các nút điều hướng
            updateNavigationButtons();
            updateQuestionNavDisplay(index);
        }

        function handleAnswerChange(qIndex, answerIndex) {
            if (isQuizSubmitted) return;
            userAnswers[qIndex] = answerIndex;
            // Tải lại câu hỏi để cập nhật highlight
            loadQuestion(qIndex);
            // Cập nhật trạng thái nút điều hướng
            updateQuestionNavDisplay(qIndex);
        }

        function changeQuestion(delta) {
            const newIndex = currentQuestionIndex + delta;
            if (newIndex >= 0 && newIndex < quizData.length) {
                loadQuestion(newIndex);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function updateNavigationButtons() {
            // Nút Previous
            prevButton.disabled = currentQuestionIndex === 0;
            prevButton.classList.toggle('opacity-50', currentQuestionIndex === 0);
            
            // Nút Next
            nextButton.disabled = currentQuestionIndex === quizData.length - 1;
            nextButton.classList.toggle('opacity-50', currentQuestionIndex === quizData.length - 1);
        }

        function initializeNavigationButtons() {
            navButtonsContainer.innerHTML = '';
            quizData.forEach((_, i) => {
                const button = document.createElement('button');
                button.textContent = i + 1;
                button.className = `nav-button w-8 h-8 md:w-10 md:h-10 text-xs md:text-sm font-semibold rounded-full m-1 border border-gray-400 ${i === currentQuestionIndex ? 'current' : 'bg-gray-200 text-gray-800'}`;
                button.setAttribute('data-index', i);
                button.addEventListener('click', () => loadQuestion(i));
                navButtonsContainer.appendChild(button);
            });
        }

        function updateQuestionNavDisplay(currentIndex) {
            const buttons = navButtonsContainer.querySelectorAll('.nav-button');
            buttons.forEach((btn, i) => {
                btn.classList.remove('current', 'answered');
                btn.classList.add('bg-gray-200', 'text-gray-800');

                if (userAnswers[i] !== null) {
                    btn.classList.add('answered');
                    btn.classList.remove('bg-gray-200', 'text-gray-800');
                }

                if (i === currentIndex) {
                    btn.classList.add('current');
                    btn.classList.remove('answered');
                }
            });
        }

        function showSubmitWarning() {
            if (isQuizSubmitted) return;
            // Kiểm tra số câu chưa làm
            const unansweredCount = userAnswers.filter(a => a === null).length;
            const message = unansweredCount > 0 
                ? `Bạn còn ${unansweredCount} câu chưa làm. Bạn có chắc chắn muốn nộp bài không?`
                : "Bạn đã hoàn thành tất cả các câu hỏi. Bạn có chắc chắn muốn nộp bài không?";
            
            document.getElementById('modal-message').textContent = message;
            modal.classList.remove('hidden');
        }

        function submitQuiz() {
            if (isQuizSubmitted) return;
            
            clearInterval(timerInterval);
            isQuizSubmitted = true;
            let correctCount = 0;

            userAnswers.forEach((userA, i) => {
                if (userA === quizData[i].a) {
                    correctCount++;
                }
            });

            // Hiển thị kết quả
            const totalQuestions = quizData.length;
            const scorePercentage = ((correctCount / totalQuestions) * 100).toFixed(1);
            
            finalScore.innerHTML = `<p class="text-3xl font-extrabold text-blue-600 mb-2">Điểm của bạn: ${correctCount}/${totalQuestions}</p><p class="text-xl text-gray-600">Đạt ${scorePercentage}% tổng số câu.</p>`;
            
            // Ẩn nút làm bài, hiện nút làm lại
            submitButton.classList.add('hidden');
            retakeButton.classList.remove('hidden');
            document.getElementById('question-controls').classList.add('hidden');
            
            // Chuyển sang chế độ xem kết quả
            loadQuestion(currentQuestionIndex);
            
            // Cuộn lên đầu để xem điểm
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function resetQuiz() {
            userAnswers = Array(quizData.length).fill(null);
            currentQuestionIndex = 0;
            timeLeft = 60 * 10;
            isQuizSubmitted = false;
            
            // Hiển thị lại nút làm bài, ẩn nút làm lại
            submitButton.classList.remove('hidden');
            retakeButton.classList.add('hidden');
            document.getElementById('question-controls').classList.remove('hidden');
            
            // Xóa kết quả
            finalScore.innerHTML = '';
            
            // Khởi động lại
            loadQuestion(currentQuestionIndex);
            startTimer();
        }
    </script>

    <!-- NỘI DUNG CHÍNH (Layout 2 cột) -->
    <div class="quiz-container md:flex">
        
        <!-- Cột 1: Thông tin và Điều hướng (Sidebar) -->
        <div class="sidebar md:w-1/4 p-4 sticky top-0 md:h-screen overflow-y-auto">
            <h1 class="text-1xl text-center font-extrabold mb-4 border-b pb-2 border-gray-700">Trắc nghiệm Từ Trường</h1>
            
            <div id="results-container" class="mb-6 p-4 bg-gray-700 rounded-lg">
                <h2 class="text-lg font-semibold mb-1 text-yellow-300">Thông Tin:</h2>
                <div class="flex items-center space-x-2 mb-2">
                    <span class="text-gray-300">Thời gian:</span>
                    <span id="timer-display" class="text-2xl font-bold text-red-400">10:00</span>
                </div>
                <div id="final-score" class="mt-4">
                    <!-- Kết quả sau khi nộp bài sẽ hiện ở đây -->
                </div>
            </div>

            <h2 class="text-xl font-semibold mb-3">Bộ Điều Hướng Câu Hỏi</h2>
            <div id="nav-buttons" class="flex flex-wrap gap-2 justify-start mb-6">
                <!-- Các nút 1-20 sẽ được tạo bằng JS -->
            </div>

            <div class="space-y-4 pt-4 border-t border-gray-700">
                <button id="submit-button" class="w-full py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition duration-200 shadow-md">
                    NỘP BÀI KIỂM TRA
                </button>
                <button id="retake-button" class="w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg transition duration-200 shadow-md hidden">
                    LÀM LẠI TỪ ĐẦU
                </button>
            </div>
        </div>

        <!-- Cột 2: Nội dung Câu Hỏi (Main Content) -->
        <div class="md:w-3/4 p-4 md:p-8">
            <div class="main-content p-6 md:p-10">
                
                <h2 id="question-counter" class="text-xl md:text-2xl font-semibold text-blue-600 mb-4 border-b pb-2">Câu hỏi 1/20</h2>
                <p id="question-text" class="text-2xl md:text-3xl font-medium text-gray-800 mb-6">Loading question...</p>
                
                <!-- Vùng Hiển Thị Tùy Chọn -->
                <div id="options-container" class="space-y-4">
                    <!-- Options are rendered by JS -->
                </div>

                <!-- Nút Next/Previous -->
                <div id="question-controls" class="mt-8 flex justify-between space-x-4">
                    <button id="prev-button" class="flex items-center px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold rounded-lg transition duration-150" disabled>
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        Quay lại
                    </button>
                    <button id="next-button" class="flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition duration-150">
                        Tiếp theo
                        <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Cảnh báo Nộp Bài -->
    <div id="submit-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 md:p-8 rounded-xl shadow-2xl w-full max-w-sm mx-4 transform transition-all scale-100 opacity-100">
            <h3 class="text-xl font-bold text-red-600 mb-4">Cảnh Báo Nộp Bài!</h3>
            <p id="modal-message" class="text-gray-700 mb-6">Bạn có chắc chắn muốn nộp bài không?</p>
            <div class="flex justify-end space-x-3">
                <button id="modal-cancel-submit" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold rounded-lg transition">
                    Hủy
                </button>
                <button id="modal-confirm-submit" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition">
                    Nộp Bài
                </button>
            </div>
        </div>
    </div>

</body>
</html>