<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thang Nhi·ªát ƒê·ªô - B√†i H·ªçc T∆∞∆°ng T√°c</title>
    <!-- T·∫£i Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- T·∫£i Lucide Icons for aesthetic feedback -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- MATHJAX INTEGRATION for rendering LaTeX formulas -->
    <script>
        // C·∫•u h√¨nh MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- C·∫•u h√¨nh Font Inter v√† m√†u s·∫Øc -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* M√†u n·ªÅn nh·∫π nh√†ng */
        }
        .slide-container {
            max-width: 900px;
            min-height: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        /* Hi·ªáu ·ª©ng gradient cho n√∫t B·∫Øt ƒë·∫ßu */
        .btn-primary {
            background-image: linear-gradient(to right, #4c51bf, #6b46c1);
            transition: transform 0.1s, box-shadow 0.1s;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(107, 70, 193, 0.4);
        }
        .btn-primary:active {
            transform: translateY(0);
            box-shadow: none;
        }
        .quiz-button {
            transition: all 0.3s;
            cursor: pointer;
        }
        .quiz-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        /* ƒê·∫£m b·∫£o MathJax hi·ªÉn th·ªã s·∫°ch s·∫Ω */
        .slide-content-area .mjx-container {
            vertical-align: middle !important;
        }
    </style>
</head>
<body class="p-4 md:p-8 flex items-center justify-center min-h-screen text-gray-800">

    <!-- Container ch√≠nh cho n·ªôi dung slide ƒë·ªông -->
    <div id="app" class="w-full bg-white rounded-xl overflow-hidden p-6 md:p-10 transition-all duration-500 relative">
        <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c render ƒë·ªông ·ªü ƒë√¢y -->
        <div class="h-full flex items-center justify-center text-center">
            <div class="text-xl text-gray-500 flex items-center">
                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                ƒêang t·∫£i n·ªôi dung...
            </div>
        </div>
    </div>

    <!-- Modal for feedback -->
    <div id="feedback-modal" class="fixed inset-0 bg-black bg-opacity-70 hidden items-center justify-center z-50">
        <div id="feedback-content" class="p-8 rounded-xl text-center shadow-2xl transform transition-all duration-300 scale-95">
            <!-- Feedback content will be inserted here -->
        </div>
    </div>

    <!-- Script logic -->
    <script>
        // Global state
        let currentSlide = 0; // 0 l√† trang ti√™u ƒë·ªÅ
        let score = 0;
        let quizRunning = false;
        let quizTimerInterval;
        let timeLeft = 15; // Time for each question (seconds)
        
        // C·∫•u h√¨nh Review Slides (10 slide) v√† Quiz Start (Slide 11)
        const TOTAL_REVIEW_SLIDES = 11; 

        // --- DATA CONTENT ---

        // D·ªØ li·ªáu n·ªôi dung c√°c Slide √¥n t·∫≠p (index 0 l√† ti√™u ƒë·ªÅ, 1-10 l√† n·ªôi dung)
        const reviewSlidesContent = [
            // Slide 0: Trang ti√™u ƒë·ªÅ (ƒê√£ ch·ªânh s·ª≠a theo y√™u c·∫ßu m·ªõi)
            `
            <div class="h-full flex flex-col items-center justify-center text-center p-4">
                <p class="text-xl font-medium text-indigo-600 mb-4">Ch·ªß ƒê·ªÅ</p>
                <h1 class="text-6xl md:text-7xl font-extrabold text-gray-900 leading-tight mb-8">
                    THANG NHI·ªÜT ƒê·ªò
                </h1>
                <div class="space-y-4 mb-12">
                    <p class="text-2xl text-gray-600 font-light">B√†i h·ªçc t∆∞∆°ng t√°c v√† tr·∫Øc nghi·ªám c·ªßng c·ªë</p>
                </div>
                <button 
                    id="start-button"
                    class="btn-primary text-white font-bold py-4 px-12 rounded-full text-xl shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-indigo-300 transition duration-150 ease-in-out"
                    onclick="nextSlide()"
                >
                    B·∫Øt ƒë·∫ßu b√†i h·ªçc
                </button>
            </div>
            `,
            // Slide 1: ƒê·ªãnh nghƒ©a Nhi·ªát ƒë·ªô & Chi·ªÅu truy·ªÅn nhi·ªát
            `
            <div class="h-full slide-content-area">
                <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-400 pb-2 mb-6">1. B·∫£n ch·∫•t & Chi·ªÅu truy·ªÅn nhi·ªát</h2>
                <div class="space-y-6">
                    <h3 class="text-2xl font-semibold text-gray-800 flex items-center"><i data-lucide="thermometer" class="w-6 h-6 mr-3 text-red-500"></i> Nhi·ªát ƒë·ªô l√† g√¨?</h3>
                    <p class="text-xl text-gray-700 pl-8">Nhi·ªát ƒë·ªô l√† ƒë·∫°i l∆∞·ª£ng ƒë·∫∑c tr∆∞ng cho <strong class="text-red-600">tr·∫°ng th√°i n√≥ng hay l·∫°nh</strong> c·ªßa m·ªôt v·∫≠t, ƒë·ªìng th·ªùi li√™n quan ƒë·∫øn ƒë·ªông nƒÉng trung b√¨nh c·ªßa c√°c ph√¢n t·ª≠ c·∫•u t·∫°o n√™n v·∫≠t ƒë√≥.</p>
                    
                    <h3 class="text-2xl font-semibold text-gray-800 flex items-center"><i data-lucide="arrow-right-left" class="w-6 h-6 mr-3 text-indigo-500"></i> Chi·ªÅu truy·ªÅn nhi·ªát</h3>
                    <p class="text-xl text-gray-700 pl-8">NƒÉng l∆∞·ª£ng nhi·ªát lu√¥n truy·ªÅn t·ª´ v·∫≠t c√≥ <strong class="text-green-600">nhi·ªát ƒë·ªô cao h∆°n</strong> sang v·∫≠t c√≥ <strong class="text-blue-600">nhi·ªát ƒë·ªô th·∫•p h∆°n</strong>. Qu√° tr√¨nh d·ª´ng l·∫°i khi ƒë·∫°t tr·∫°ng th√°i c√¢n b·∫±ng nhi·ªát (c√πng nhi·ªát ƒë·ªô).</p>
                </div>
            </div>
            `,
            // Slide 2: Nguy√™n t·∫Øc ƒëo nhi·ªát ƒë·ªô & Nhi·ªát k·∫ø
            `
            <div class="h-full slide-content-area">
                <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-400 pb-2 mb-6">2. Nguy√™n t·∫Øc ho·∫°t ƒë·ªông c·ªßa Nhi·ªát k·∫ø</h2>
                <div class="space-y-6">
                    <div class="p-4 bg-yellow-50 rounded-lg shadow-md">
                        <h3 class="text-2xl font-bold text-yellow-700 mb-3 flex items-center"><i data-lucide="ruler" class="w-6 h-6 mr-3"></i> Nguy√™n t·∫Øc chung:</h3>
                        <p class="text-xl text-gray-700 pl-8">D·ª±a tr√™n s·ª± ph·ª• thu·ªôc c·ªßa m·ªôt <strong class="text-orange-600">ƒë·∫°i l∆∞·ª£ng v·∫≠t l√≠</strong> c√≥ th·ªÉ ƒëo ƒë∆∞·ª£c v√†o nhi·ªát ƒë·ªô (v√≠ d·ª•: th·ªÉ t√≠ch, ƒëi·ªán tr·ªü, su·∫•t ƒëi·ªán ƒë·ªông c·∫∑p nhi·ªát ƒëi·ªán...).</p>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-800 flex items-center"><i data-lucide="droplet" class="w-6 h-6 mr-3 text-red-500"></i> Nhi·ªát k·∫ø Th·ªßy ng√¢n:</h3>
                    <p class="text-xl text-gray-700 pl-8">Ho·∫°t ƒë·ªông nh·ªù hi·ªán t∆∞·ª£ng <strong class="text-red-600">d√£n n·ªü v√¨ nhi·ªát</strong> c·ªßa ch·∫•t l·ªèng (th·ªßy ng√¢n) ƒë·ªÉ x√°c ƒë·ªãnh nhi·ªát ƒë·ªô.</p>
                </div>
            </div>
            `,
            // Slide 3: Thang Nhi·ªát ƒë·ªô Celsius (¬∞C)
            `
            <div class="h-full slide-content-area">
                <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-400 pb-2 mb-6">3. Thang Nhi·ªát ƒë·ªô Celsius ($^{\\circ}C$)</h2>
                <div class="p-4 bg-indigo-50 rounded-lg shadow-md space-y-3">
                    <ul class="list-disc list-inside space-y-3 text-gray-700 text-xl">
                        <li><strong class="text-indigo-700">K√≠ hi·ªáu:</strong> $t$ (ƒë∆°n v·ªã: $^{\\circ}C$).</li>
                        <li><strong class="text-indigo-700">M·ªëc 1:</strong> Nhi·ªát ƒë·ªô n∆∞·ªõc ƒë√° ƒëang tan ·ªü √°p su·∫•t $1 \\text{ atm}$ ƒë∆∞·ª£c ch·ªçn l√† $0^{\\circ}C$.</li>
                        <li><strong class="text-indigo-700">M·ªëc 2:</strong> Nhi·ªát ƒë·ªô n∆∞·ªõc ƒëang s√¥i ·ªü √°p su·∫•t $1 \\text{ atm}$ ƒë∆∞·ª£c ch·ªçn l√† $100^{\\circ}C$.</li>
                        <li><strong class="text-indigo-700">Kho·∫£ng chia:</strong> Kho·∫£ng c√°ch gi·ªØa hai m·ªëc ƒë∆∞·ª£c chia th√†nh <strong class="text-red-600">100 ph·∫ßn</strong> b·∫±ng nhau.</li>
                    </ul>
                </div>
            </div>
            `,
            // Slide 4: Thang Nhi·ªát ƒë·ªô Kelvin (K) - Tuy·ªát ƒë·ªëi
            `
            <div class="h-full slide-content-area">
                <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-400 pb-2 mb-6">4. Thang Nhi·ªát ƒë·ªô Kelvin (K) - Tuy·ªát ƒë·ªëi</h2>
                <div class="p-4 bg-purple-50 rounded-lg shadow-md space-y-3">
                    <ul class="list-disc list-inside space-y-3 text-gray-700 text-xl">
                        <li><strong class="text-purple-700">K√≠ hi·ªáu:</strong> $T$ (ƒë∆°n v·ªã: $\\text{K}$). ƒê√¢y l√† thang nhi·ªát ƒë·ªô <strong class="text-red-600">SI</strong>.</li>
                        <li><strong class="text-purple-700">M·ªëc 0:</strong> <strong class="text-red-600">ƒê·ªô kh√¥ng tuy·ªát ƒë·ªëi</strong> ($0 \\text{ K}$). T·∫°i nhi·ªát ƒë·ªô n√†y, ƒë·ªông nƒÉng chuy·ªÉn ƒë·ªông nhi·ªát c·ªßa c√°c ph√¢n t·ª≠ b·∫±ng kh√¥ng.</li>
                        <li><strong class="text-purple-700">M·ªëc ƒë·∫∑c bi·ªát:</strong> Nhi·ªát ƒë·ªô ƒëi·ªÉm ba c·ªßa n∆∞·ªõc l√† $273.16 \\text{ K}$.</li>
                        <li><strong class="text-purple-700">Kh√¥ng c√≥ gi√° tr·ªã √¢m:</strong> Nhi·ªát ƒë·ªô Kelvin lu√¥n c√≥ gi√° tr·ªã <strong class="text-red-600">kh√¥ng √¢m</strong> ($T \\ge 0$).</li>
                    </ul>
                </div>
            </div>
            `,
            // Slide 5: So s√°nh 1¬∞C v√† 1 K
            `
            <div class="h-full flex flex-col items-center justify-center text-center slide-content-area">
                <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-400 pb-2 mb-8 w-full text-center">5. ƒê·ªô l·ªõn c·ªßa kho·∫£ng nhi·ªát ƒë·ªô</h2>
                <div class="bg-gradient-to-r from-green-400 to-emerald-500 text-white p-10 rounded-2xl shadow-xl transform hover:scale-105 transition duration-300">
                    <div class="text-5xl font-extrabold mb-4">
                        $1^{\\circ}C \\approx 1 \\text{ K}$
                    </div>
                    <p class="text-2xl">ƒê·ªô l·ªõn c·ªßa $1^{\\circ}C$ b·∫±ng ƒë·ªô l·ªõn c·ªßa $1 \\text{ K}$.</p>
                    <p class="text-lg mt-2 font-light">S·ª± kh√°c bi·ªát ch·ªâ n·∫±m ·ªü m·ªëc $0$ (zero reference).</p>
                </div>
                <p class="text-xl text-gray-700 mt-8">Do ƒë√≥, ch√™nh l·ªách nhi·ªát ƒë·ªô trong $^{\\circ}C$ c≈©ng b·∫±ng ch√™nh l·ªách nhi·ªát ƒë·ªô trong $\\text{K}$: $\\Delta t = \\Delta T$.</p>
            </div>
            `,
            // Slide 6: C√¥ng th·ª©c chuy·ªÉn ƒë·ªïi Celsius ‚Üî Kelvin
            `
            <div class="h-full slide-content-area">
                <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-400 pb-2 mb-6">6. C√¥ng Th·ª©c Chuy·ªÉn ƒê·ªïi ($^{\\circ}C \\leftrightarrow \\text{K}$)</h2>
                <p class="text-xl text-gray-700 mb-6">M·ªëi li√™n h·ªá gi·ªØa nhi·ªát ƒë·ªô Kelvin ($T$) v√† Celsius ($t$):</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="p-6 bg-cyan-100 rounded-lg shadow-lg text-center">
                        <h3 class="text-2xl font-bold text-cyan-800 mb-3">T·ª´ $^{\\circ}C$ sang $\\text{K}$</h3>
                        <div class="text-4xl font-extrabold text-cyan-600">
                            $$T = t + 273.15$$
                        </div>
                        <p class="text-base mt-2">(Th∆∞·ªùng d√πng $273$ cho t√≠nh to√°n c∆° b·∫£n)</p>
                    </div>
                    <div class="p-6 bg-cyan-100 rounded-lg shadow-lg text-center">
                        <h3 class="text-2xl font-bold text-cyan-800 mb-3">T·ª´ $\\text{K}$ sang $^{\\circ}C$</h3>
                        <div class="text-4xl font-extrabold text-cyan-600">
                            $$t = T - 273.15$$
                        </div>
                        <p class="text-base mt-2">ƒê·∫£o ng∆∞·ª£c ph√©p t√≠nh ƒë·ªÉ c√≥ $t$.</p>
                    </div>
                </div>
            </div>
            `,
            // Slide 7: Gi·ªõi thi·ªáu Thang Fahrenheit (¬∞F)
            `
            <div class="h-full slide-content-area">
                <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-400 pb-2 mb-6">7. Thang Nhi·ªát ƒë·ªô Fahrenheit ($^{\\circ}F$)</h2>
                <div class="p-4 bg-red-50 rounded-lg shadow-md space-y-3">
                    <p class="text-xl text-gray-700">Thang Fahrenheit ƒë∆∞·ª£c s·ª≠ d·ª•ng ch·ªß y·∫øu t·∫°i M·ªπ v√† m·ªôt s·ªë qu·ªëc gia kh√°c.</p>
                    <ul class="list-disc list-inside space-y-2 text-gray-700 text-lg">
                        <li><strong class="text-red-700">M·ªëc n∆∞·ªõc ƒë√° tan:</strong> $32^{\\circ}F$.</li>
                        <li><strong class="text-red-700">M·ªëc n∆∞·ªõc s√¥i:</strong> $212^{\\circ}F$.</li>
                        <li><strong class="text-red-700">Kho·∫£ng chia:</strong> ƒê∆∞·ª£c chia th√†nh $180$ kho·∫£ng b·∫±ng nhau.</li>
                    </ul>
                    <p class="text-base mt-4 text-gray-500">C√¥ng th·ª©c chuy·ªÉn ƒë·ªïi: $\\frac{t}{5} = \\frac{F - 32}{9}$</p>
                </div>
            </div>
            `,
            // Slide 8: ƒêi·ªÉm ba c·ªßa n∆∞·ªõc (Triple Point) (ƒê√É S·ª¨A L·ªñI)
            `
            <div class="h-full slide-content-area">
                <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-400 pb-2 mb-6">8. ƒêi·ªÉm Ba c·ªßa N∆∞·ªõc (Triple Point)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="p-4 bg-blue-50 rounded-lg shadow-lg">
                        <h3 class="text-2xl font-bold text-blue-700 mb-3">Tr·∫°ng th√°i Ba</h3>
                        <p class="text-xl text-gray-700">L√† tr·∫°ng th√°i duy nh·∫•t m√† t·∫°i ƒë√≥ n∆∞·ªõc t·ªìn t·∫°i <strong class="text-blue-600">ƒë·ªìng th·ªùi c·∫£ ba th·ªÉ: R·∫Øn, L·ªèng v√† H∆°i</strong> trong ƒëi·ªÅu ki·ªán c√¢n b·∫±ng nhi·ªát.</p>
                        <p class="text-lg mt-4 text-red-600">ƒê√¢y l√† m·ªëc nhi·ªát ƒë·ªô quan tr·ªçng nh·∫•t d√πng ƒë·ªÉ ƒë·ªãnh nghƒ©a thang Kelvin.</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-lg text-center">
                        <h3 class="text-2xl font-bold text-blue-700 mb-3">Gi√° tr·ªã ƒêi·ªÉm Ba</h3>
                        <div class="text-xl font-semibold mb-2">Nhi·ªát ƒë·ªô:</div>
                        <div class="text-3xl font-extrabold text-red-600 mb-4">
                            $0.01^{\\circ}C$ ho·∫∑c $273.16 \\text{ K}$
                        </div>
                        <div class="text-xl font-semibold mb-2">√Åp su·∫•t:</div>
                        <div class="text-3xl font-extrabold text-red-600">
                            $\\approx 0.61 \\text{ kPa}$
                        </div>
                    </div>
                </div>
            </div>
            `,
            // Slide 9: T√≥m t·∫Øt & ·ª®ng d·ª•ng
            `
            <div class="h-full slide-content-area">
                <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-400 pb-2 mb-6">9. T√≥m T·∫Øt C√°c Kh√°i Ni·ªám Ch√≠nh</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                    <div class="p-4 bg-green-100 rounded-lg shadow-md">
                        <i data-lucide="zap" class="w-8 h-8 text-green-600 mx-auto mb-2"></i>
                        <p class="font-bold text-lg">Chi·ªÅu Nhi·ªát</p>
                        <p class="text-sm">N√≥ng $\\to$ L·∫°nh</p>
                    </div>
                    <div class="p-4 bg-blue-100 rounded-lg shadow-md">
                        <i data-lucide="layers-3" class="w-8 h-8 text-blue-600 mx-auto mb-2"></i>
                        <p class="font-bold text-lg">M·ªëc quan tr·ªçng</p>
                        <p class="text-sm">$0^{\\circ}C$, $100^{\\circ}C$ v√† $0 \\text{ K}$, $273.16 \\text{ K}$</p>
                    </div>
                    <div class="p-4 bg-red-100 rounded-lg shadow-md">
                        <i data-lucide="snowflake" class="w-8 h-8 text-red-600 mx-auto mb-2"></i>
                        <p class="font-bold text-lg">ƒê·ªô kh√¥ng tuy·ªát ƒë·ªëi</p>
                        <p class="text-sm">$0 \\text{ K}$ (ƒê·ªông nƒÉng ph√¢n t·ª≠ $= 0$)</p>
                    </div>
                </div>
                <div class="mt-8 text-center">
                    <p class="text-2xl font-semibold text-gray-800">S·∫µn s√†ng ƒë·ªÉ th·ª≠ th√°ch b·∫£n th√¢n v·ªõi Quiz Game?</p>
                </div>
            </div>
            `,
            // Slide 10: B·∫Øt ƒë·∫ßu Quiz (New index)
            `
            <div class="h-full flex flex-col items-center justify-center text-center p-4">
                <div class="text-5xl font-extrabold text-red-600 mb-4">C·ª¶NG C·ªê KI·∫æN TH·ª®C</div>
                <div class="text-2xl font-bold text-gray-800 mb-8">QUIZ GAME: 10 C√ÇU H·ªéI TR·∫ÆC NGHI·ªÜM</div>
                <div class="text-lg text-gray-600 space-y-3 p-4 bg-yellow-100 border-l-4 border-yellow-500 rounded-lg">
                    <p>üí° M·ªói c√¢u h·ªèi c√≥ <strong class="text-red-500">15 gi√¢y</strong> ƒë·ªÉ tr·∫£ l·ªùi.</p>
                    <p>üèÜ Tr·∫£ l·ªùi ƒë√∫ng nh·∫≠n ƒëi·ªÉm, tr·∫£ l·ªùi sai s·∫Ω b·ªã t√≠nh sai.</p>
                    <p>üéØ C√¢u h·ªèi ƒë∆∞·ª£c s·∫Øp x·∫øp t·ª´ d·ªÖ ƒë·∫øn kh√≥.</p>
                </div>
                <button onclick="startQuiz()" class="mt-10 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    B·∫ÆT ƒê·∫¶U TH·ª¨ TH√ÅCH NGAY!
                </button>
            </div>
            `
        ];

        // Data for Quiz (10 questions, easy to hard)
        const quizData = [
            // D·ªÖ: Chi·ªÅu truy·ªÅn nhi·ªát
            { q: "Chi·ªÅu truy·ªÅn nƒÉng l∆∞·ª£ng nhi·ªát gi·ªØa hai v·∫≠t ch√™nh l·ªách nhi·ªát ƒë·ªô ti·∫øp x√∫c nhau l√†?", options: ["T·ª´ v·∫≠t l·∫°nh h∆°n sang v·∫≠t n√≥ng h∆°n", "T·ª´ v·∫≠t c√≥ kh·ªëi l∆∞·ª£ng l·ªõn h∆°n", "T·ª´ v·∫≠t n√≥ng h∆°n sang v·∫≠t l·∫°nh h∆°n", "Theo h∆∞·ªõng b·∫•t k·ª≥"], answerIndex: 2, difficulty: "D·ªÖ" },
            // D·ªÖ: K·∫øt th√∫c truy·ªÅn nhi·ªát
            { q: "Qu√° tr√¨nh truy·ªÅn nƒÉng l∆∞·ª£ng nhi·ªát gi·ªØa hai v·∫≠t k·∫øt th√∫c khi n√†o?", options: ["V·∫≠t n√≥ng h∆°n h·∫øt nhi·ªát", "Hai v·∫≠t ·ªü c√πng nhi·ªát ƒë·ªô (c√¢n b·∫±ng nhi·ªát)", "V·∫≠t l·∫°nh h∆°n b·∫Øt ƒë·∫ßu b·ªëc h∆°i", "Sau 5 ph√∫t k·ªÉ t·ª´ khi ti·∫øp x√∫c"], answerIndex: 1, difficulty: "D·ªÖ" },
            // Trung b√¨nh: Thang Celsius
            { q: "Hai m·ªëc nhi·ªát ƒë·ªô quan tr·ªçng trong thang nhi·ªát ƒë·ªô Celsius (·ªü √°p su·∫•t $1 \\text{ atm}$) l√† g√¨?", options: ["$10^{\\circ}C$ v√† $90^{\\circ}C$", "$0 \\text{ K}$ v√† $273.15 \\text{ K}$", "$0^{\\circ}C$ (n∆∞·ªõc ƒë√° tan) v√† $100^{\\circ}C$ (n∆∞·ªõc s√¥i)", "$32^{\\circ}F$ v√† $212^{\\circ}F$"], answerIndex: 2, difficulty: "Trung b√¨nh" },
            // Trung b√¨nh: Nguy√™n l√Ω nhi·ªát k·∫ø
            { q: "Nhi·ªát k·∫ø th·ªßy ng√¢n ho·∫°t ƒë·ªông d·ª±a tr√™n nguy√™n t·∫Øc v·∫≠t l√Ω n√†o?", options: ["Hi·ªán t∆∞·ª£ng c·∫£m ·ª©ng t·ª´", "S·ª± thay ƒë·ªïi m√†u s·∫Øc", "Hi·ªán t∆∞·ª£ng d√£n n·ªü v√¨ nhi·ªát c·ªßa th·ªßy ng√¢n", "S·ª± ph·ª• thu·ªôc ƒëi·ªán tr·ªü theo nhi·ªát ƒë·ªô"], answerIndex: 2, difficulty: "Trung b√¨nh" },
            // Trung b√¨nh: Thang Kelvin
            { q: "ƒê·ªô kh√¥ng tuy·ªát ƒë·ªëi ($0 \\text{ K}$) l√† nhi·ªát ƒë·ªô m√† t·∫°i ƒë√≥...", options: ["N∆∞·ªõc tinh khi·∫øt ƒë√≥ng bƒÉng", "ƒê·ªông nƒÉng chuy·ªÉn ƒë·ªông nhi·ªát c·ªßa c√°c ph√¢n t·ª≠ b·∫±ng kh√¥ng", "Nhi·ªát ƒë·ªô s√¥i c·ªßa n∆∞·ªõc", "Th·∫ø nƒÉng c·ªßa v·∫≠t ch·∫•t l√† t·ªëi ƒëa"], answerIndex: 1, difficulty: "Trung b√¨nh" },
            // Trung b√¨nh: C√¥ng th·ª©c chuy·ªÉn ƒë·ªïi (L√Ω thuy·∫øt)
            { q: "M·ªëc $0^{\\circ}C$ trong thang nhi·ªát ƒë·ªô Celsius t∆∞∆°ng ·ª©ng v·ªõi bao nhi√™u Kelvin?", options: ["$100 \\text{ K}$", "$273.15 \\text{ K}$", "$32 \\text{ K}$", "$0 \\text{ K}$"], answerIndex: 1, difficulty: "Trung b√¨nh" },
            // Kh√≥: V·∫≠n d·ª•ng c√¥ng th·ª©c 1
            { q: "Nhi·ªát ƒë·ªô trong ph√≤ng l√† $27^{\\circ}C$. Gi√° tr·ªã n√†y t∆∞∆°ng ·ª©ng v·ªõi bao nhi√™u Kelvin?", options: ["$27 \\text{ K}$", "$273 \\text{ K}$", "$300 \\text{ K}$", "$246 \\text{ K}$"], answerIndex: 2, difficulty: "Kh√≥" },
            // Kh√≥: V·∫≠n d·ª•ng c√¥ng th·ª©c 2
            { q: "M·ªôt l√≤ nung c√≥ nhi·ªát ƒë·ªô l√† $1273 \\text{ K}$. Nhi·ªát ƒë·ªô n√†y t∆∞∆°ng ·ª©ng v·ªõi bao nhi√™u ƒë·ªô Celsius?", options: ["$1000^{\\circ}C$", "$1273^{\\circ}C$", "$1546^{\\circ}C$", "$950^{\\circ}C$"], answerIndex: 0, difficulty: "Kh√≥" },
            // Kh√≥: Thang Fahrenheit
            { q: "Kho·∫£ng c√°ch gi·ªØa nhi·ªát ƒë·ªô n∆∞·ªõc ƒë√° tan ($32^{\\circ}F$) v√† n∆∞·ªõc s√¥i ($212^{\\circ}F$) trong thang Fahrenheit ƒë∆∞·ª£c chia th√†nh bao nhi√™u kho·∫£ng b·∫±ng nhau?", options: ["100", "180", "212", "273"], answerIndex: 1, difficulty: "Kh√≥" },
            // R·∫•t kh√≥: ƒêi·ªÉm Ba
            { q: "ƒêi·ªÉm ba (Triple Point) c·ªßa n∆∞·ªõc l√† tr·∫°ng th√°i m√† t·∫°i ƒë√≥ n∆∞·ªõc t·ªìn t·∫°i ƒë·ªìng th·ªùi ·ªü 3 th·ªÉ R·∫Øn, L·ªèng, H∆°i v·ªõi nhi·ªát ƒë·ªô v√† √°p su·∫•t x√°c ƒë·ªãnh l√† bao nhi√™u?", options: ["$0^{\\circ}C$ v√† $1 \\text{ atm}$", "$100^{\\circ}C$ v√† $1 \\text{ atm}$", "$0.01^{\\circ}C$ v√† kho·∫£ng $0.61 \\text{ kPa}$", "$273.15 \\text{ K}$ v√† $100 \\text{ kPa}$"], answerIndex: 2, difficulty: "R·∫•t kh√≥" }
        ];

        // --- CORE RENDERING & NAVIGATION ---

        function renderSlideContent(index) {
            if (quizRunning) return; // Kh√¥ng can thi·ªáp n·∫øu ƒëang trong Quiz

            const appDiv = document.getElementById('app');
            appDiv.innerHTML = reviewSlidesContent[index]; // L·∫•y n·ªôi dung slide t·ª´ m·∫£ng

            // RENDER NAVIGATION BUTTONS
            // V·ªã tr√≠ slide review: 1 ƒë·∫øn 9 (n·ªôi dung), 10 (b·∫Øt ƒë·∫ßu quiz)
            const maxContentSlide = TOTAL_REVIEW_SLIDES - 1; // 10
            
            let navHTML = '';
            
            // N·∫øu l√† trang n·ªôi dung (1 ƒë·∫øn 9)
            if (index > 0 && index < maxContentSlide) {
                navHTML = `
                    <div class="absolute bottom-4 left-4">
                        <button onclick="prevSlide()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full transition duration-150">
                            ‚Üê Quay l·∫°i
                        </button>
                    </div>
                    <div class="absolute bottom-4 right-4">
                        <button onclick="nextSlide()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-full transition duration-150">
                            Ti·∫øp theo ‚Üí
                        </button>
                    </div>
                    <div class="absolute bottom-5 left-1/2 transform -translate-x-1/2 text-gray-500 text-sm">
                        Slide ${index} / ${maxContentSlide - 1}
                    </div>
                `;
            } 
            // N·∫øu l√† trang B·∫Øt ƒë·∫ßu Quiz (10)
            else if (index === maxContentSlide) {
                 navHTML = `
                    <div class="absolute bottom-4 left-4">
                        <button onclick="prevSlide()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-full transition duration-150">
                            ‚Üê Quay l·∫°i
                        </button>
                    </div>
                `;
            }

            appDiv.innerHTML += navHTML;


            // RENDER MATHJAX: Process the newly added content for LaTeX formulas
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([appDiv]).catch((err) => console.error("MathJax typesetting failed:", err));
            }

            // RENDER ICONS
            if (typeof lucide !== 'undefined') {
                 lucide.createIcons(); 
            }
        }

        function nextSlide() {
            if (quizRunning) return;
            const maxSlideIndex = TOTAL_REVIEW_SLIDES - 1; 
            if (currentSlide < maxSlideIndex) {
                currentSlide++;
                renderSlideContent(currentSlide);
            }
        }

        function prevSlide() {
            if (quizRunning) return;
            if (currentSlide > 0) { 
                currentSlide--;
                renderSlideContent(currentSlide);
            }
        }
        
        // --- QUIZ LOGIC ---

        function startQuiz() {
            currentSlide = 0; // Reset slide index for quiz (Q1 starts at 0)
            score = 0;
            quizRunning = true;
            renderQuizQuestion();
        }

        function renderQuizQuestion() {
            if (currentSlide >= quizData.length) {
                renderQuizResult();
                return;
            }

            const qData = quizData[currentSlide];
            const appDiv = document.getElementById('app');

            appDiv.innerHTML = `
                <div class="flex justify-between items-center mb-6 border-b pb-4">
                    <h2 class="text-2xl font-extrabold text-red-600">C√¢u ${currentSlide + 1} / ${quizData.length}</h2>
                    <div class="text-lg font-semibold text-gray-600 px-3 py-1 rounded-full bg-yellow-100">
                        M·ª©c ƒë·ªô: ${qData.difficulty}
                    </div>
                    <div id="quiz-timer" class="text-2xl font-bold text-white bg-indigo-600 rounded-full w-12 h-12 flex items-center justify-center shadow-lg">
                        ${timeLeft}
                    </div>
                </div>

                <p class="text-xl md:text-2xl font-semibold mb-8 text-gray-800 slide-content-area">${qData.q}</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="options-container">
                    ${qData.options.map((option, index) => `
                        <button class="quiz-button bg-gray-100 text-gray-700 p-4 rounded-lg text-left text-lg font-medium border-2 border-transparent hover:border-indigo-500 slide-content-area"
                            onclick="checkAnswer(${index}, this)">
                            <span class="font-bold text-indigo-500 mr-2">${String.fromCharCode(65 + index)}.</span> ${option}
                        </button>
                    `).join('')}
                </div>
            `;
            
            // RENDER MATHJAX FOR QUESTION OPTIONS (v√† c√¢u h·ªèi)
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([appDiv]).catch((err) => console.error("MathJax typesetting failed:", err));
            }

            resetTimer();
        }

        function resetTimer() {
            clearInterval(quizTimerInterval);
            timeLeft = 15;
            const timerElement = document.getElementById('quiz-timer');
            if(timerElement) timerElement.textContent = timeLeft;
            
            quizTimerInterval = setInterval(() => {
                timeLeft--;
                const timerElement = document.getElementById('quiz-timer');
                if (timerElement) {
                    timerElement.classList.remove('bg-red-500', 'animate-pulse');
                    timerElement.classList.add('bg-indigo-600');
                    timerElement.textContent = timeLeft;
                    if (timeLeft <= 5) {
                        timerElement.classList.remove('bg-indigo-600');
                        timerElement.classList.add('bg-red-500', 'animate-pulse');
                    } 
                }
                if (timeLeft <= 0) {
                    clearInterval(quizTimerInterval);
                    handleAnswer(false, `H·∫øt gi·ªù! ƒê√°p √°n ƒë√∫ng l√†: ${quizData[currentSlide].options[quizData[currentSlide].answerIndex]}`);
                }
            }, 1000);
        }

        function checkAnswer(selectedIndex, buttonElement) {
            clearInterval(quizTimerInterval);

            // Disable all buttons after selecting an answer
            document.querySelectorAll('#options-container button').forEach(btn => btn.disabled = true);

            const qData = quizData[currentSlide];
            const isCorrect = selectedIndex === qData.answerIndex;

            // Highlight the selected button
            buttonElement.classList.remove('bg-gray-100', 'hover:border-indigo-500');

            if (isCorrect) {
                score++;
                buttonElement.classList.add('bg-green-100', 'border-green-500');
                handleAnswer(true, 'Ch√≠nh x√°c! C√πng xem c√¢u ti·∫øp theo nh√©.');
            } else {
                buttonElement.classList.add('bg-red-100', 'border-red-500');
                // Highlight the correct answer
                const correctButton = document.querySelectorAll('#options-container button')[qData.answerIndex];
                correctButton.classList.remove('bg-gray-100', 'hover:border-indigo-500');
                correctButton.classList.add('bg-green-200', 'border-green-600');
                handleAnswer(false, 'Sai r·ªìi! ƒê·ª´ng n·∫£n ch√≠, √¥n l·∫°i b√†i gi·∫£ng v√† th·ª≠ l·∫°i nh√©!');
            }
        }

        function handleAnswer(isCorrect, message) {
            const modal = document.getElementById('feedback-modal');
            const content = document.getElementById('feedback-content');

            if (isCorrect) {
                // Correct Answer - Congratulations
                content.className = 'p-8 rounded-xl text-center shadow-2xl transform transition-all duration-300 scale-100 bg-green-600 text-white';
                content.innerHTML = `
                    <i data-lucide="trophy" class="w-16 h-16 mx-auto mb-4 text-yellow-300"></i>
                    <h3 class="text-3xl font-bold mb-2">CH√öC M·ª™NG!</h3>
                    <p class="text-xl">${message}</p>
                `;
            } else {
                // Incorrect Answer - Encouragement
                content.className = 'p-8 rounded-xl text-center shadow-2xl transform transition-all duration-300 scale-100 bg-red-600 text-white';
                content.innerHTML = `
                    <i data-lucide="thumbs-down" class="w-16 h-16 mx-auto mb-4 text-white"></i>
                    <h3 class="text-3xl font-bold mb-2">CH∆ØA CH√çNH X√ÅC!</h3>
                    <p class="text-xl">${message}</p>
                `;
            }
            lucide.createIcons();
            modal.classList.remove('hidden');
            modal.classList.add('flex');

            setTimeout(() => {
                modal.classList.remove('flex');
                modal.classList.add('hidden');
                currentSlide++;
                renderQuizQuestion();
            }, 2000); // Wait 2 seconds before moving to the next question
        }

        function renderQuizResult() {
            clearInterval(quizTimerInterval);
            quizRunning = false; // Cho ph√©p ƒëi·ªÅu h∆∞·ªõng sau khi k·∫øt th√∫c Quiz
            
            const appDiv = document.getElementById('app');

            let resultMessage, icon;
            if (score === quizData.length) {
                resultMessage = "Ho√†n h·∫£o! Em ƒë√£ n·∫Øm v·ªØng ki·∫øn th·ª©c b√†i h·ªçc.";
                icon = '<i data-lucide="crown" class="w-20 h-20 mx-auto mb-6 text-yellow-500"></i>';
            } else if (score >= quizData.length * 0.7) {
                resultMessage = "R·∫•t t·ªët! C·∫ßn √¥n t·∫≠p th√™m m·ªôt ch√∫t ·ªü c√°c c√¢u kh√≥ h∆°n.";
                icon = '<i data-lucide="medal" class="w-20 h-20 mx-auto mb-6 text-yellow-500"></i>';
            } else {
                resultMessage = "Em c·∫ßn xem l·∫°i ph·∫ßn ki·∫øn th·ª©c v√† √¥n t·∫≠p k·ªπ h∆°n nh√©!";
                icon = '<i data-lucide="book-open" class="w-20 h-20 mx-auto mb-6 text-indigo-500"></i>';
            }

            appDiv.innerHTML = `
                <div class="h-full flex flex-col items-center justify-center text-center p-4">
                    <h2 class="text-4xl font-extrabold text-green-600 mb-6">HO√ÄN TH√ÄNH B√ÄI C·ª¶NG C·ªê!</h2>
                    ${icon}
                    <p class="text-5xl font-bold text-gray-800 mb-4">
                        ƒêi·ªÉm c·ªßa em: <span class="text-indigo-600">${score} / ${quizData.length}</span>
                    </p>
                    <p class="text-xl text-gray-600 mb-10">${resultMessage}</p>

                    <div class="space-x-4">
                        <button onclick="currentSlide = 1; renderSlideContent(currentSlide);" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                            √în l·∫°i B√†i Gi·∫£ng
                        </button>
                        <button onclick="startQuiz();" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                            Ch∆°i L·∫°i Quiz
                        </button>
                    </div>
                </div>
            `;
            lucide.createIcons();
        }
        
        // H√†m kh·ªüi t·∫°o ·ª©ng d·ª•ng, ch·ªâ g·ªçi sau khi MathJax ƒë√£ s·∫µn s√†ng
        function initApp() {
            // currentSlide = 0: Trang ti√™u ƒë·ªÅ
            // currentSlide = 1: B·∫Øt ƒë·∫ßu n·ªôi dung b√†i h·ªçc
            renderSlideContent(currentSlide);
            lucide.createIcons();
        }

        // B·∫Øt ƒë·∫ßu ·ª©ng d·ª•ng ch·ªâ sau khi MathJax ƒë√£ ƒë∆∞·ª£c t·∫£i v√† kh·ªüi t·∫°o.
        window.onload = () => {
            if (window.MathJax) {
                window.MathJax.startup.promise.then(() => {
                    initApp();
                }).catch((err) => {
                    console.error("MathJax failed to initialize:", err);
                    initApp(); 
                });
            } else {
                initApp();
            }
        };
    </script>
</body>
</html>