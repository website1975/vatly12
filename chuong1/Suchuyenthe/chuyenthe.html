<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C·∫•u Tr√∫c V√† S·ª± Chuy·ªÉn Th·ªÉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        .slide {
            min-height: 80vh;
            border-radius: 1rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transition: opacity 0.5s ease-in-out, transform 0.3s ease;
        }
        .quiz-container {
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .quiz-option {
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .quiz-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 10px -2px rgba(0, 0, 0, 0.15);
        }
        .correct-answer {
            background-color: #4CAF50 !important; /* Green */
            color: white !important;
            border: 3px solid #388E3C;
        }
        .incorrect-answer {
            background-color: #F44336 !important; /* Red */
            color: white !important;
            border: 3px solid #D32F2F;
        }
        .progress-bar {
            height: 10px;
            background-color: #4f46e5;
            transition: width 1s linear;
        }
        .celebration-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.1);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            padding: 2rem;
            border-radius: 1rem;
            z-index: 1000;
        }
        .celebration-popup.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        /* CSS cho M√¥ ph·ªèng Ph√¢n t·ª≠ */
        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #38bdf8; /* M√†u xanh da tr·ªùi */
            border-radius: 50%;
            box-shadow: 0 0 5px 2px rgba(56, 189, 248, 0.7);
            /* animation properties added dynamically via JS */
            animation-iteration-count: infinite;
            animation-direction: alternate;
            animation-timing-function: linear;
        }

        /* Styling cho s∆° ƒë·ªì chuy·ªÉn th·ªÉ TAM GI√ÅC */
        .phase-diagram {
            position: relative;
            width: 100%;
            height: 300px; /* Chi·ªÅu cao c·ªë ƒë·ªãnh cho s∆° ƒë·ªì tam gi√°c */
            display: flex;
            justify-content: center;
            align-items: flex-end;
            margin-bottom: 3rem;
        }
        .state-node {
            position: absolute;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px; /* Pill shape */
            font-weight: 700;
            color: #ffffff;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            border: 3px solid white;
            transition: transform 0.3s ease;
        }
        .state-node:hover {
             transform: scale(1.05);
        }
        .solid-node { top: 0; left: 50%; transform: translateX(-50%); background-color: #ef4444; }
        .liquid-node { bottom: 0; left: 0%; background-color: #3b82f6; }
        .gas-node { bottom: 0; right: 0%; background-color: #10b981; }

        /* ƒê∆∞·ªùng n√©t v√† ch√∫ th√≠ch */
        .line-segment {
            position: absolute;
            z-index: 10;
        }
        .line-label {
            position: absolute;
            font-size: 0.8rem;
            font-weight: 600;
            padding: 0.1rem 0.5rem;
            border-radius: 0.25rem;
            line-height: 1;
            z-index: 20;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .heat-in { background-color: #fef2f2; color: #dc2626; border: 1px solid #f87171;} /* Thu nhi·ªát */
        .heat-out { background-color: #eff6ff; color: #2563eb; border: 1px solid #60a5fa;} /* To·∫£ nhi·ªát */

        /* S·ª≠ d·ª•ng SVG cho c√°c ƒë∆∞·ªùng k·∫ª v√† m≈©i t√™n */
        .diagram-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div id="app" class="max-w-4xl mx-auto">
        
        <!-- Header -->
        <header class="text-center mb-6">
            <h1 class="text-3xl font-bold text-indigo-700">CH·ª¶ ƒê·ªÄ: C·∫§U TR√öC V√Ä S·ª∞ CHUY·ªÇN TH·ªÇ</h1>
            <p class="text-gray-500">B√†i h·ªçc t∆∞∆°ng t√°c v√† Tr·∫Øc nghi·ªám c·ªßng c·ªë</p>
        </header>

        <!-- Main Content Area -->
        <div id="content-area" class="bg-white p-6 md:p-10 transition-all duration-500">
            <!-- Slides will be injected here -->
        </div>

        <!-- Navigation and Status -->
        <div id="controls" class="mt-6 flex justify-between items-center">
            <button id="prev-btn" onclick="prevSlide()" class="px-4 py-2 bg-gray-300 text-gray-700 font-semibold rounded-lg shadow-md hover:bg-gray-400 transition duration-150 disabled:opacity-50" disabled>
                &larr; Quay l·∫°i
            </button>
            <div id="status" class="text-lg font-medium text-indigo-600">
                Slide 1/5
            </div>
            <button id="next-btn" onclick="nextSlide()" class="px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 transition duration-150">
                Ti·∫øp theo &rarr;
            </button>
        </div>

    </div>

    <!-- Celebration/Encouragement Popup -->
    <div id="popup" class="celebration-popup hidden"></div>

    <script>
        // D·ªØ li·ªáu B√†i gi·∫£ng (Slides)
        const slides = [
            {
                title: "I. M√î H√åNH ƒê·ªòNG H·ªåC PH√ÇN T·ª¨",
                content: `
                    <div class="md:flex md:space-x-8">
                        <div class="md:w-1/2">
                            <ul class="space-y-4 text-gray-700 text-lg">
                                <li><span class="font-semibold text-indigo-600">1. C·∫•u t·∫°o:</span> C√°c ch·∫•t ƒë∆∞·ª£c c·∫•u t·∫°o t·ª´ c√°c h·∫°t ri√™ng bi·ªát (ph√¢n t·ª≠, nguy√™n t·ª≠, ion).</li>
                                <li><span class="font-semibold text-indigo-600">2. Chuy·ªÉn ƒë·ªông:</span> C√°c ph√¢n t·ª≠ chuy·ªÉn ƒë·ªông kh√¥ng ng·ª´ng (chuy·ªÉn ƒë·ªông nhi·ªát). <br/> &rarr; Nhi·ªát ƒë·ªô c√†ng cao, t·ªëc ƒë·ªô chuy·ªÉn ƒë·ªông c√†ng l·ªõn.</li>
                                <li><span class="font-semibold text-indigo-600">3. L·ª±c t∆∞∆°ng t√°c:</span> Gi·ªØa c√°c ph√¢n t·ª≠ c√≥ l·ª±c h√∫t v√† l·ª±c ƒë·∫©y (l·ª±c li√™n k·∫øt ph√¢n t·ª≠).</li>
                            </ul>
                        </div>
                        <!-- KHUNG M√î H√åNH ƒê·ªòNG H·ªåC C√ì ANIMATION -->
                        <div class="md:w-1/2 mt-6 md:mt-0 flex items-center justify-center bg-gray-900 p-4 rounded-xl h-64 relative overflow-hidden border-4 border-indigo-400">
                            <div id="molecular-model" class="w-full h-full relative">
                                <!-- Particles will be generated here -->
                                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white/50 text-sm select-none">M√¥ ph·ªèng Chuy·ªÉn ƒë·ªông Nhi·ªát</div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                title: "II. C·∫§U TR√öC C·ª¶A V·∫¨T CH·∫§T (3 Th·ªÉ)",
                content: `
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200 rounded-lg text-center">
                            <thead>
                                <tr class="bg-indigo-500 text-white">
                                    <th class="py-2 px-4 border-b">ƒê·∫∑c ƒëi·ªÉm</th>
                                    <th class="py-2 px-4 border-b">Th·ªÉ R·∫Øn</th>
                                    <th class="py-2 px-4 border-b">Th·ªÉ L·ªèng</th>
                                    <th class="py-2 px-4 border-b">Th·ªÉ Kh√≠</th>
                                </tr>
                            </thead>
                            <tbody class="text-sm text-gray-700">
                                <tr>
                                    <td class="py-2 px-4 border-b font-semibold">Kho·∫£ng c√°ch p.t·ª≠</td>
                                    <td class="py-2 px-4 border-b">R·∫•t g·∫ßn nhau (c·ª° k√≠ch th∆∞·ªõc p.t·ª≠)</td>
                                    <td class="py-2 px-4 border-b">Xa nhau</td>
                                    <td class="py-2 px-4 border-b">R·∫•t xa nhau (g·∫•p h√†ng ch·ª•c l·∫ßn)</td>
                                </tr>
                                <tr class="bg-indigo-50">
                                    <td class="py-2 px-4 border-b font-semibold">S·ª± s·∫Øp x·∫øp</td>
                                    <td class="py-2 px-4 border-b">
                                        <div class="flex flex-col items-center justify-center h-20">
                                            <span class="text-2xl mb-1">üßä</span>
                                            <span class="font-bold text-green-700">Tr·∫≠t t·ª± (M·∫°ng tinh th·ªÉ)</span>
                                            <span class="text-xs text-gray-600">Ph√¢n t·ª≠ n·∫±m t·∫°i c√°c n√∫t c·ªë ƒë·ªãnh.</span>
                                        </div>
                                    </td>
                                    <td class="py-2 px-4 border-b">
                                        <div class="flex flex-col items-center justify-center h-20">
                                            <span class="text-2xl mb-1">üíß</span>
                                            <span class="font-bold text-yellow-700">K√©m tr·∫≠t t·ª± (Tr·∫≠t t·ª± g·∫ßn)</span>
                                            <span class="text-xs text-gray-600">Ph√¢n t·ª≠ tr∆∞·ª£t v√† di chuy·ªÉn qua l·∫°i.</span>
                                        </div>
                                    </td>
                                    <td class="py-2 px-4 border-b">
                                        <div class="flex flex-col items-center justify-center h-20">
                                            <span class="text-2xl mb-1">üí®</span>
                                            <span class="font-bold text-red-700">Ho√†n to√†n h·ªón lo·∫°n</span>
                                            <span class="text-xs text-gray-600">Ph√¢n t·ª≠ chuy·ªÉn ƒë·ªông kh√¥ng ng·ª´ng.</span>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 border-b font-semibold">Chuy·ªÉn ƒë·ªông p.t·ª≠</td>
                                    <td class="py-2 px-4 border-b">Ch·ªâ dao ƒë·ªông quanh VTCB c·ªë ƒë·ªãnh</td>
                                    <td class="py-2 px-4 border-b">Dao ƒë·ªông quanh VTCB lu√¥n thay ƒë·ªïi</td>
                                    <td class="py-2 px-4 border-b">Chuy·ªÉn ƒë·ªông h·ªón lo·∫°n kh√¥ng ng·ª´ng</td>
                                </tr>
                                <tr class="bg-indigo-50">
                                    <td class="py-2 px-4 border-b font-semibold">H√¨nh d·∫°ng/Th·ªÉ t√≠ch</td>
                                    <td class="py-2 px-4 border-b">X√°c ƒë·ªãnh/X√°c ƒë·ªãnh, kh√≥ n√©n</td>
                                    <td class="py-2 px-4 border-b">Kh√¥ng x√°c ƒë·ªãnh/X√°c ƒë·ªãnh, kh√≥ n√©n</td>
                                    <td class="py-2 px-4 border-b">Kh√¥ng x√°c ƒë·ªãnh/Kh√¥ng x√°c ƒë·ªãnh, d·ªÖ n√©n</td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 font-semibold">L·ª±c t∆∞∆°ng t√°c</td>
                                    <td class="py-2 px-4">L·ªõn</td>
                                    <td class="py-2 px-4">Trung b√¨nh</td>
                                    <td class="py-2 px-4">Nh·ªè</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                `
            },
            {
                title: "III. S·ª∞ CHUY·ªÇN TH·ªÇ & PH√ÇN LO·∫†I CH·∫§T R·∫ÆN",
                content: `
                    <div class="md:flex md:space-x-8">
                        <div class="md:w-1/2">
                            <h3 class="text-xl font-bold text-red-600 mb-6">1. S∆° ƒë·ªì Chuy·ªÉn Th·ªÉ (Tam gi√°c Tr·∫°ng th√°i)</h3>
                            <!-- S∆° ƒë·ªì Tam gi√°c Chuy·ªÉn th·ªÉ tr·ª±c quan -->
                            <div class="phase-diagram relative">
                                <!-- Nodes -->
                                <div class="state-node solid-node" style="left: 50%; top: 0; transform: translateX(-50%);">R·∫ÆN üßä</div>
                                <div class="state-node liquid-node" style="left: 0; bottom: 0;">L·ªéNG üíß</div>
                                <div class="state-node gas-node" style="right: 0; bottom: 0;">KH√ç üí®</div>
                                
                                <!-- SVG for Lines and Arrows -->
                                <svg class="diagram-svg" viewBox="0 0 400 300" preserveAspectRatio="xMidYMid meet">
                                    <!-- T√≠nh to√°n v·ªã tr√≠ c√°c ƒë·ªânh ƒë·ªÉ ƒë·∫∑t ƒë∆∞·ªùng k·∫ª ch√≠nh x√°c (gi·∫£ ƒë·ªãnh 3 ƒë·ªânh R(200, 30), L(50, 270), K(350, 270)) -->
                                    <defs>
                                        <marker id="arrowhead-in" markerWidth="6" markerHeight="6" refX="2" refY="3" orient="auto">
                                            <polygon points="0 0, 6 3, 0 6" fill="#dc2626" />
                                        </marker>
                                        <marker id="arrowhead-out" markerWidth="6" markerHeight="6" refX="2" refY="3" orient="auto">
                                            <polygon points="0 0, 6 3, 0 6" fill="#2563eb" />
                                        </marker>
                                    </defs>

                                    <!-- R·∫ÆN (200, 30) <-> L·ªéNG (50, 270) -->
                                    <!-- N√≥ng ch·∫£y (Thu nhi·ªát): L·ªèng -> R·∫Øn -->
                                    <path d="M 60 260 L 190 40" stroke="#dc2626" stroke-width="2" marker-end="url(#arrowhead-in)" fill="none"/>
                                    <!-- ƒê√¥ng ƒë·∫∑c (To·∫£ nhi·ªát): R·∫Øn -> L·ªèng -->
                                    <path d="M 190 40 L 60 260" stroke="#2563eb" stroke-width="2" marker-end="url(#arrowhead-out)" fill="none"/>
                                    
                                    <!-- L·ªéNG (50, 270) <-> KH√ç (350, 270) -->
                                    <!-- H√≥a h∆°i (Thu nhi·ªát): L·ªèng -> Kh√≠ -->
                                    <path d="M 60 270 L 340 270" stroke="#dc2626" stroke-width="2" marker-end="url(#arrowhead-in)" fill="none"/>
                                    <!-- Ng∆∞ng t·ª• (To·∫£ nhi·ªát): Kh√≠ -> L·ªèng -->
                                    <path d="M 340 280 L 60 280" stroke="#2563eb" stroke-width="2" marker-end="url(#arrowhead-out)" fill="none"/>

                                    <!-- R·∫ÆN (200, 30) <-> KH√ç (350, 270) -->
                                    <!-- ThƒÉng hoa (Thu nhi·ªát): R·∫Øn -> Kh√≠ -->
                                    <path d="M 210 40 L 340 260" stroke="#dc2626" stroke-width="2" marker-end="url(#arrowhead-in)" fill="none"/>
                                    <!-- Ng∆∞ng ƒë·ªçng (To·∫£ nhi·ªát): Kh√≠ -> R·∫Øn -->
                                    <path d="M 340 260 L 210 40" stroke="#2563eb" stroke-width="2" marker-end="url(#arrowhead-out)" fill="none"/>

                                    <!-- Ch√∫ th√≠ch Qu√° tr√¨nh v√† Nhi·ªát -->
                                    
                                    <!-- R·∫ÆN <-> L·ªéNG (Tr·ª•c b√™n tr√°i) -->
                                    <foreignObject x="100" y="100" width="100" height="50">
                                        <div xmlns="http://www.w3.org/1999/xhtml" class="line-label heat-in" style="transform: rotate(-50deg) translate(-75%, 0);">N√≥ng ch·∫£y (Thu Nhi·ªát)</div>
                                    </foreignObject>
                                    <foreignObject x="100" y="150" width="100" height="50">
                                        <div xmlns="http://www.w3.org/1999/xhtml" class="line-label heat-out" style="transform: rotate(-50deg) translate(-10%, 0);">ƒê√¥ng ƒë·∫∑c (To·∫£ Nhi·ªát)</div>
                                    </foreignObject>
                                    
                                    <!-- L·ªéNG <-> KH√ç (Tr·ª•c d∆∞·ªõi) -->
                                    <foreignObject x="100" y="235" width="200" height="30">
                                        <div xmlns="http://www.w3.org/1999/xhtml" class="line-label heat-in" style="margin-left: 20px;">H√≥a h∆°i (Thu Nhi·ªát)</div>
                                    </foreignObject>
                                    <foreignObject x="100" y="285" width="200" height="30">
                                        <div xmlns="http://www.w3.org/1999/xhtml" class="line-label heat-out" style="margin-left: 20px;">Ng∆∞ng t·ª• (To·∫£ Nhi·ªát)</div>
                                    </foreignObject>

                                    <!-- R·∫ÆN <-> KH√ç (Tr·ª•c b√™n ph·∫£i) -->
                                    <foreignObject x="200" y="100" width="100" height="50">
                                        <div xmlns="http://www.w3.org/1999/xhtml" class="line-label heat-in" style="transform: rotate(50deg) translate(-25%, 0);">ThƒÉng hoa (Thu Nhi·ªát)</div>
                                    </foreignObject>
                                    <foreignObject x="200" y="150" width="100" height="50">
                                        <div xmlns="http://www.w3.org/1999/xhtml" class="line-label heat-out" style="transform: rotate(50deg) translate(25%, 0);">Ng∆∞ng ƒë·ªçng (To·∫£ Nhi·ªát)</div>
                                    </foreignObject>
                                </svg>
                            </div>

                            <h3 class="text-xl font-bold text-indigo-600 mb-3 border-t pt-4">2. Ph√¢n Lo·∫°i Ch·∫•t R·∫Øn</h3>
                            <ul class="list-disc ml-6 text-gray-700 space-y-2">
                                <li><span class="font-bold text-indigo-700">K·∫øt tinh:</span> C√≥ c·∫•u tr√∫c tinh th·ªÉ, c√≥ nhi·ªát ƒë·ªô n√≥ng ch·∫£y <span class="text-green-600 font-extrabold">X√ÅC ƒê·ªäNH</span> (Mu·ªëi, Kim c∆∞∆°ng).</li>
                                <li><span class="font-bold text-indigo-700">V√¥ ƒë·ªãnh h√¨nh:</span> Kh√¥ng c√≥ c·∫•u tr√∫c tinh th·ªÉ, n√≥ng ch·∫£y <span class="text-red-600 font-extrabold">KH√îNG X√ÅC ƒê·ªäNH</span> (m·ªÅm d·∫ßn) (Th·ªßy tinh, nh·ª±a).</li>
                            </ul>
                        </div>
                        
                        <div class="md:w-1/2 mt-6 md:mt-0 flex flex-col items-center justify-center bg-gray-50 p-4 rounded-xl shadow-inner">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">ƒê·ªì Th·ªã N√≥ng Ch·∫£y (Nhi·ªát ƒë·ªô $T$ vs Nhi·ªát l∆∞·ª£ng $Q$)</h3>
                            <!-- SVG cho ƒê·ªì th·ªã N√≥ng ch·∫£y (K·∫øt tinh vs V√¥ ƒë·ªãnh h√¨nh) -->
                            <svg width="100%" height="250" viewBox="0 0 400 250" xmlns="http://www.w3.org/2000/svg" class="max-w-xs">
                                <!-- Axes -->
                                <line x1="50" y1="220" x2="380" y2="220" stroke="#374151" stroke-width="2"/>
                                <line x1="50" y1="220" x2="50" y2="20" stroke="#374151" stroke-width="2"/>
                                
                                <!-- Labels -->
                                <text x="385" y="225" font-size="12" fill="#374151" font-weight="bold">Q (Nhi·ªát l∆∞·ª£ng)</text>
                                <text x="35" y="25" font-size="12" fill="#374151" font-weight="bold">T (Nhi·ªát ƒë·ªô)</text>

                                <!-- Ch·∫•t R·∫Øn K·∫øt Tinh (ƒê∆∞·ªùng B - Green/Blue) -->
                                <path id="curveB" d="M 50 180 L 150 180 L 220 110 L 350 110" fill="none" stroke="#22c55e" stroke-width="3" stroke-dasharray="0"/>
                                <text x="360" y="115" font-size="12" fill="#22c55e" font-weight="bold">B (K·∫øt Tinh)</text>
                                <text x="180" y="200" font-size="12" fill="#22c55e" font-weight="bold">T=const (N√≥ng ch·∫£y)</text>
                                <circle cx="150" cy="180" r="4" fill="#22c55e"/>

                                <!-- Ch·∫•t R·∫Øn V√¥ ƒê·ªãnh H√¨nh (ƒê∆∞·ªùng A - Red/Orange) -->
                                <path id="curveA" d="M 50 200 L 120 160 L 250 100 L 350 80" fill="none" stroke="#ef4444" stroke-width="3" stroke-dasharray="4 2"/>
                                <text x="360" y="85" font-size="12" fill="#ef4444" font-weight="bold">A (V√¥ ƒê·ªãnh H√¨nh)</text>
                                
                                <!-- Ghi ch√∫ N√≥ng ch·∫£y x√°c ƒë·ªãnh -->
                                <line x1="45" y1="180" x2="55" y2="180" stroke="#22c55e" stroke-width="1"/>
                                <text x="15" y="185" font-size="10" fill="#22c55e">T<sub>nc</sub></text>

                            </svg>
                            <p class="text-xs text-gray-500 mt-2">ƒê∆∞·ªùng B: N√≥ng ch·∫£y ·ªü nhi·ªát ƒë·ªô x√°c ƒë·ªãnh. ƒê∆∞·ªùng A: Nhi·ªát ƒë·ªô tƒÉng li√™n t·ª•c.</p>
                        </div>
                    </div>
                `
            },
            {
                title: "IV. S·ª∞ S√îI V√Ä S·ª∞ BAY H∆†I",
                content: `
                    <div class="md:flex md:space-x-8">
                        <div class="md:w-1/2 p-4 bg-yellow-50 rounded-lg">
                            <h3 class="text-xl font-semibold text-yellow-800 mb-3 border-b border-yellow-300 pb-2">S·ª∞ BAY H∆†I</h3>
                            <ul class="list-disc ml-6 text-gray-700 space-y-2">
                                <li>X·∫£y ra <span class="font-bold">·ªü m·∫∑t tho√°ng</span> c·ªßa ch·∫•t l·ªèng.</li>
                                <li>X·∫£y ra ·ªü <span class="font-bold">m·ªçi nhi·ªát ƒë·ªô</span>.</li>
                                <li><span class="font-semibold">T·ªëc ƒë·ªô ph·ª• thu·ªôc:</span> Di·ªán t√≠ch m·∫∑t tho√°ng, t·ªëc ƒë·ªô gi√≥, nhi·ªát ƒë·ªô, ƒë·ªô ·∫©m kh√¥ng kh√≠.</li>
                            </ul>
                        </div>
                        <div class="md:w-1/2 mt-6 md:mt-0 p-4 bg-green-50 rounded-lg">
                            <h3 class="text-xl font-semibold text-green-800 mb-3 border-b border-green-300 pb-2">S·ª∞ S√îI</h3>
                            <ul class="list-disc ml-6 text-gray-700 space-y-2">
                                <li>X·∫£y ra <span class="font-bold">c·∫£ trong l√≤ng v√† tr√™n b·ªÅ m·∫∑t</span> ch·∫•t l·ªèng.</li>
                                <li>X·∫£y ra ·ªü <span class="font-bold">nhi·ªát ƒë·ªô s√¥i x√°c ƒë·ªãnh</span>.</li>
                                <li><span class="font-semibold">Nhi·ªát ƒë·ªô s√¥i ph·ª• thu·ªôc:</span> √Åp su·∫•t tr√™n m·∫∑t tho√°ng, b·∫£n ch·∫•t ch·∫•t l·ªèng.</li>
                                <li><span class="font-bold text-red-500">L∆ØU √ù:</span> Trong qu√° tr√¨nh ho√° h∆°i (s√¥i), nhi·ªát ƒë·ªô ch·∫•t kh√¥ng thay ƒë·ªïi.</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            {
                title: "C·ª¶NG C·ªê B√ÄI H·ªåC: TR√í CH∆†I TR·∫ÆC NGHI·ªÜM",
                content: `
                    <div class="text-center py-10">
                        <h2 class="text-3xl font-bold text-indigo-700 mb-4">S·∫¥N S√ÄNG CH∆ØA?</h2>
                        <p class="text-xl text-gray-600 mb-8">H√£y l√†m b√†i tr·∫Øc nghi·ªám nhanh ƒë·ªÉ c·ªßng c·ªë ki·∫øn th·ª©c. M·ªói c√¢u 15 gi√¢y!</p>
                        <button id="start-quiz-btn" onclick="startQuiz()" class="px-8 py-4 bg-green-500 text-white text-xl font-bold rounded-full shadow-lg hover:bg-green-600 transition duration-150 transform hover:scale-105">
                            B·∫ÆT ƒê·∫¶U TR·∫ÆC NGHI·ªÜM
                        </button>
                    </div>
                `,
                isQuizIntro: true
            }
        ];

        // D·ªØ li·ªáu Tr·∫Øc nghi·ªám (Quiz)
        const quizQuestions = [
            {
                questionNumber: 1,
                question: "Theo M√¥ h√¨nh ƒë·ªông h·ªçc ph√¢n t·ª≠, t·ªëc ƒë·ªô chuy·ªÉn ƒë·ªông c·ªßa c√°c ph√¢n t·ª≠ thay ƒë·ªïi nh∆∞ th·∫ø n√†o khi nhi·ªát ƒë·ªô v·∫≠t ch·∫•t tƒÉng?",
                answerOptions: [
                    { text: "Gi·∫£m d·∫ßn", isCorrect: false, rationale: "T·ªëc ƒë·ªô chuy·ªÉn ƒë·ªông nhi·ªát c·ªßa ph√¢n t·ª≠ t·ªâ l·ªá thu·∫≠n v·ªõi nhi·ªát ƒë·ªô tuy·ªát ƒë·ªëi." },
                    { text: "TƒÉng d·∫ßn", isCorrect: true, rationale: "Khi nhi·ªát ƒë·ªô tƒÉng, ƒë·ªông nƒÉng trung b√¨nh c·ªßa c√°c ph√¢n t·ª≠ tƒÉng, l√†m ch√∫ng chuy·ªÉn ƒë·ªông nhanh h∆°n." },
                    { text: "Kh√¥ng thay ƒë·ªïi", isCorrect: false, rationale: "Chuy·ªÉn ƒë·ªông nhi·ªát lu√¥n thay ƒë·ªïi theo nhi·ªát ƒë·ªô m√¥i tr∆∞·ªùng xung quanh." },
                    { text: "Ban ƒë·∫ßu tƒÉng, sau ƒë√≥ gi·∫£m", isCorrect: false, rationale: "T·ªëc ƒë·ªô ch·ªâ tƒÉng l√™n li√™n t·ª•c khi nhi·ªát ƒë·ªô tƒÉng li√™n t·ª•c." }
                ],
                hint: "H√£y nh·ªõ l·∫°i m·ªëi quan h·ªá gi·ªØa nhi·ªát ƒë·ªô v√† ƒë·ªông nƒÉng c·ªßa c√°c ph√¢n t·ª≠ trong v·∫≠t ch·∫•t."
            },
            {
                questionNumber: 2,
                question: "ƒê·∫∑c ƒëi·ªÉm n√†o v·ªÅ s·ª± s·∫Øp x·∫øp ph√¢n t·ª≠ l√† ƒê√öNG v·ªõi Th·ªÉ Kh√≠?",
                answerOptions: [
                    { text: "Tr·∫≠t t·ª±, t·∫°o th√†nh m·∫°ng tinh th·ªÉ", isCorrect: false, rationale: "ƒê√¢y l√† ƒë·∫∑c ƒëi·ªÉm c·ªßa ch·∫•t ·ªü th·ªÉ r·∫Øn (k·∫øt tinh)." },
                    { text: "K√©m tr·∫≠t t·ª±, ch·ªâ c√≥ tr·∫≠t t·ª± g·∫ßn", isCorrect: false, rationale: "ƒê√¢y l√† ƒë·∫∑c ƒëi·ªÉm c·ªßa ch·∫•t ·ªü th·ªÉ l·ªèng." },
                    { text: "Ho√†n to√†n kh√¥ng c√≥ tr·∫≠t t·ª± (h·ªón lo·∫°n)", isCorrect: true, rationale: "Trong th·ªÉ kh√≠, kho·∫£ng c√°ch gi·ªØa c√°c ph√¢n t·ª≠ r·∫•t l·ªõn v√† ch√∫ng chuy·ªÉn ƒë·ªông h·ªón lo·∫°n kh√¥ng ng·ª´ng." },
                    { text: "Dao ƒë·ªông quanh v·ªã tr√≠ c√¢n b·∫±ng c·ªë ƒë·ªãnh", isCorrect: false, rationale: "ƒê√¢y l√† ƒë·∫∑c ƒëi·ªÉm c·ªßa chuy·ªÉn ƒë·ªông ph√¢n t·ª≠ trong ch·∫•t r·∫Øn." }
                ],
                hint: "H√£y h√¨nh dung kho·∫£ng c√°ch gi·ªØa c√°c ph√¢n t·ª≠ trong th·ªÉ kh√≠ r·∫•t xa nhau so v·ªõi k√≠ch th∆∞·ªõc c·ªßa ch√∫ng."
            },
            {
                questionNumber: 3,
                question: "Ch·∫•t r·∫Øn v√¥ ƒë·ªãnh h√¨nh kh√°c ch·∫•t r·∫Øn k·∫øt tinh ·ªü ƒë·∫∑c ƒëi·ªÉm n√≥ng ch·∫£y n√†o?",
                answerOptions: [
                    { text: "N√≥ng ch·∫£y ·ªü nhi·ªát ƒë·ªô kh√¥ng ƒë·ªïi", isCorrect: false, rationale: "ƒê√¢y l√† ƒë·∫∑c ƒëi·ªÉm c·ªßa ch·∫•t r·∫Øn k·∫øt tinh." },
                    { text: "N√≥ng ch·∫£y li√™n t·ª•c, nhi·ªát ƒë·ªô tƒÉng d·∫ßn", isCorrect: true, rationale: "Ch·∫•t r·∫Øn v√¥ ƒë·ªãnh h√¨nh m·ªÅm d·∫ßn v√† chuy·ªÉn sang l·ªèng trong m·ªôt kho·∫£ng nhi·ªát ƒë·ªô, kh√¥ng c√≥ nhi·ªát ƒë·ªô n√≥ng ch·∫£y x√°c ƒë·ªãnh." },
                    { text: "Kh√¥ng bao gi·ªù n√≥ng ch·∫£y, ch·ªâ ph√¢n h·ªßy", isCorrect: false, rationale: "C√°c ch·∫•t v√¥ ƒë·ªãnh h√¨nh nh∆∞ th·ªßy tinh, nh·ª±a v·∫´n c√≥ th·ªÉ chuy·ªÉn sang tr·∫°ng th√°i l·ªèng (m·ªÅm) khi nhi·ªát ƒë·ªô tƒÉng." },
                    { text: "C√≥ t√≠nh d·ªã h∆∞·ªõng v·ªÅ nhi·ªát", isCorrect: false, rationale: "Ch·∫•t r·∫Øn v√¥ ƒë·ªãnh h√¨nh c√≥ t√≠nh ƒë·∫≥ng h∆∞·ªõng." }
                ],
                hint: "Quan s√°t l·∫°i ƒë·ªì th·ªã A v√† B ƒë·ªÉ xem ƒë∆∞·ªùng cong n√†o bi·ªÉu th·ªã s·ª± n√≥ng ch·∫£y c·ªßa ch·∫•t r·∫Øn v√¥ ƒë·ªãnh h√¨nh."
            },
            {
                questionNumber: 4,
                question: "Qu√° tr√¨nh chuy·ªÉn th·ªÉ n√†o sau ƒë√¢y l√† qu√° tr√¨nh THU nhi·ªát l∆∞·ª£ng?",
                answerOptions: [
                    { text: "Ng∆∞ng t·ª•", isCorrect: false, rationale: "Ng∆∞ng t·ª• (Kh√≠ $\\to$ L·ªèng) l√† qu√° tr√¨nh t·ªèa nhi·ªát." },
                    { text: "ƒê√¥ng ƒë·∫∑c", isCorrect: false, rationale: "ƒê√¥ng ƒë·∫∑c (L·ªèng $\\to$ R·∫Øn) l√† qu√° tr√¨nh t·ªèa nhi·ªát." },
                    { text: "N√≥ng ch·∫£y", isCorrect: true, rationale: "N√≥ng ch·∫£y (R·∫Øn $\\to$ L·ªèng) l√† qu√° tr√¨nh thu nhi·ªát l∆∞·ª£ng t·ª´ m√¥i tr∆∞·ªùng." },
                    { text: "Ng∆∞ng k·∫øt", isCorrect: false, rationale: "Ng∆∞ng k·∫øt (Kh√≠ $\\to$ R·∫Øn) l√† qu√° tr√¨nh t·ªèa nhi·ªát." }
                ],
                hint: "H√£y nh·ªõ: ƒë·ªÉ v·∫≠t ch·∫•t chuy·ªÉn t·ª´ tr·∫°ng th√°i c√≥ l·ª±c li√™n k·∫øt m·∫°nh h∆°n (r·∫Øn) sang y·∫øu h∆°n (l·ªèng, kh√≠), n√≥ c·∫ßn nƒÉng l∆∞·ª£ng."
            },
            {
                questionNumber: 5,
                question: "S·ª± s√¥i kh√°c s·ª± bay h∆°i ·ªü ƒëi·ªÉm c∆° b·∫£n n√†o?",
                answerOptions: [
                    { text: "S·ª± s√¥i ch·ªâ x·∫£y ra ·ªü m·∫∑t tho√°ng, s·ª± bay h∆°i x·∫£y ra c·∫£ trong l√≤ng", isCorrect: false, rationale: "Ng∆∞·ª£c l·∫°i, s·ª± bay h∆°i x·∫£y ra ·ªü m·∫∑t tho√°ng, s·ª± s√¥i x·∫£y ra c·∫£ trong l√≤ng v√† tr√™n b·ªÅ m·∫∑t." },
                    { text: "S·ª± s√¥i x·∫£y ra ·ªü nhi·ªát ƒë·ªô b·∫•t k√¨, s·ª± bay h∆°i ·ªü nhi·ªát ƒë·ªô s√¥i x√°c ƒë·ªãnh", isCorrect: false, rationale: "Ng∆∞·ª£c l·∫°i, s·ª± bay h∆°i ·ªü nhi·ªát ƒë·ªô b·∫•t k√¨, s·ª± s√¥i ·ªü nhi·ªát ƒë·ªô s√¥i x√°c ƒë·ªãnh." },
                    { text: "S·ª± s√¥i x·∫£y ra ·ªü nhi·ªát ƒë·ªô s√¥i x√°c ƒë·ªãnh v√† c·∫£ trong l√≤ng ch·∫•t l·ªèng", isCorrect: true, rationale: "S·ª± s√¥i l√† qu√° tr√¨nh h√≥a h∆°i m√£nh li·ªát x·∫£y ra ·ªü nhi·ªát ƒë·ªô s√¥i, ƒë·ªìng th·ªùi x·∫£y ra c·∫£ b√™n trong v√† tr√™n b·ªÅ m·∫∑t ch·∫•t l·ªèng." },
                    { text: "S·ª± s√¥i kh√¥ng ph·ª• thu·ªôc √°p su·∫•t, s·ª± bay h∆°i c√≥ ph·ª• thu·ªôc", isCorrect: false, rationale: "Nhi·ªát ƒë·ªô s√¥i ph·ª• thu·ªôc ch·∫∑t ch·∫Ω v√†o √°p su·∫•t tr√™n m·∫∑t tho√°ng." }
                ],
                hint: "T·∫≠p trung v√†o hai y·∫øu t·ªë ch√≠nh ph√¢n bi·ªát hai qu√° tr√¨nh: v·ªã tr√≠ x·∫£y ra v√† ƒëi·ªÅu ki·ªán nhi·ªát ƒë·ªô."
            }
        ];

        let currentSlideIndex = 0;
        let isQuizMode = false;
        let currentQuizIndex = 0;
        let timer;
        let score = 0;
        const TIME_LIMIT = 15; // 15 seconds

        const contentArea = document.getElementById('content-area');
        const statusEl = document.getElementById('status');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const popup = document.getElementById('popup');
        
        // --- CH·ª®C NƒÇNG T·∫†O V√Ä CH·∫†Y M√î PH·ªéNG PH√ÇN T·ª¨ ---
        function generateParticles() {
            const container = document.getElementById('molecular-model');
            if (!container) return;
            
            // 1. D·ªçn d·∫πp keyframes c≈© v√† particles
            container.innerHTML = '';
            
            // Lo·∫°i b·ªè stylesheet ƒë·ªông c≈© n·∫øu c√≥ (Fix SecurityError)
            const oldStyle = document.getElementById('particle-keyframes');
            if (oldStyle) {
                oldStyle.remove();
            }

            const numParticles = 20;

            // 2. T·∫°o stylesheet m·ªõi ƒë·ªÉ ch√®n keyframe (tr√°nh SecurityError)
            const newStyleSheet = document.createElement('style');
            newStyleSheet.id = 'particle-keyframes'; // D√πng ID ƒë·ªÉ d·ªÖ d√†ng t√¨m v√† x√≥a
            document.head.appendChild(newStyleSheet);
            // L·∫•y sheet t·ª´ element m·ªõi t·∫°o, ƒë·∫£m b·∫£o n√≥ l√† same-origin
            const styleSheet = newStyleSheet.sheet;


            // D√πng setTimeout ƒë·ªÉ ƒë·∫£m b·∫£o container ƒë√£ ƒë∆∞·ª£c render v√† c√≥ k√≠ch th∆∞·ªõc
            setTimeout(() => {
                const containerWidth = container.clientWidth;
                const containerHeight = container.clientHeight;

                for (let i = 0; i < numParticles; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';

                    // V·ªã tr√≠ ng·∫´u nhi√™n
                    const x = Math.random() * (containerWidth - 20) + 10; // ƒê·∫£m b·∫£o kh√¥ng s√°t l·ªÅ
                    const y = Math.random() * (containerHeight - 20) + 10;
                    
                    // Thu·ªôc t√≠nh animation ng·∫´u nhi√™n
                    const duration = 8 + Math.random() * 4; // 8s ƒë·∫øn 12s
                    const delay = Math.random() * duration;

                    particle.style.left = `${x}px`;
                    particle.style.top = `${y}px`;
                    particle.style.animationDuration = `${duration}s`;
                    particle.style.animationDelay = `-${delay}s`;

                    // T·∫°o keyframe ƒë·ªôc nh·∫•t ƒë·ªÉ c√≥ chuy·ªÉn ƒë·ªông h·ªón lo·∫°n
                    // Gi·ªõi h·∫°n d·ªãch chuy·ªÉn ng·∫´u nhi√™n so v·ªõi v·ªã tr√≠ ban ƒë·∫ßu (tƒÉng t√≠nh ·ªïn ƒë·ªãnh)
                    const maxOffset = 50; 
                    const randomX1 = Math.random() * maxOffset - (maxOffset / 2);
                    const randomY1 = Math.random() * maxOffset - (maxOffset / 2);
                    const randomX2 = Math.random() * maxOffset - (maxOffset / 2);
                    const randomY2 = Math.random() * maxOffset - (maxOffset / 2);
                    const randomX3 = Math.random() * maxOffset - (maxOffset / 2);
                    const randomY3 = Math.random() * maxOffset - (maxOffset / 2);


                    const keyframeName = `move-p-${i}`;

                    // Ch√®n keyframe v√†o stylesheet m·ªõi (SAFE)
                    try {
                        const rule = `
                            @keyframes ${keyframeName} {
                                0% { transform: translate(0, 0); }
                                25% { transform: translate(${randomX1}px, ${randomY1}px); }
                                50% { transform: translate(${randomX2}px, ${randomY2}px); }
                                75% { transform: translate(${randomX3}px, ${randomY3}px); }
                                100% { transform: translate(0, 0); }
                            }
                        `;
                        styleSheet.insertRule(rule, styleSheet.cssRules.length);
                        
                        particle.style.animationName = keyframeName;
                        container.appendChild(particle);
                    } catch (e) {
                        console.error("L·ªói khi ch√®n keyframe:", e);
                    }
                }
            }, 100); // Ch·ªù 100ms ƒë·ªÉ DOM ·ªïn ƒë·ªãnh
        }
        // --- K·∫æT TH√öC CH·ª®C NƒÇNG M√î PH·ªéNG ---


        function renderSlide(index) {
            currentSlideIndex = index;
            const slide = slides[index];

            if (slide.isQuizIntro) {
                prevBtn.disabled = false;
                nextBtn.disabled = true; // Block next until quiz is done or started
            } else {
                nextBtn.disabled = index === slides.length - 1;
                prevBtn.disabled = index === 0;
            }

            contentArea.innerHTML = `
                <div class="slide bg-white p-6 md:p-8">
                    <h2 class="text-2xl font-bold text-indigo-700 mb-6 border-b-2 border-indigo-200 pb-2">${slide.title}</h2>
                    ${slide.content}
                </div>
            `;
            statusEl.textContent = `Slide ${index + 1}/${slides.length}`;

            // Ch·∫°y m√¥ ph·ªèng n·∫øu l√† slide 0
            if (index === 0) {
                generateParticles();
            }
        }

        function prevSlide() {
            if (isQuizMode) return;
            if (currentSlideIndex > 0) {
                renderSlide(currentSlideIndex - 1);
            }
        }

        function nextSlide() {
            if (isQuizMode) return;
            if (currentSlideIndex < slides.length - 1) {
                renderSlide(currentSlideIndex + 1);
            }
        }

        function startQuiz() {
            isQuizMode = true;
            currentQuizIndex = 0;
            score = 0;
            // Hide navigation buttons
            const startQuizBtn = document.getElementById('start-quiz-btn');
            if(startQuizBtn) startQuizBtn.style.display = 'none';
            prevBtn.style.display = 'none';
            nextBtn.style.display = 'none';
            renderQuizQuestion();
        }

        function showPopup(message, bgColor, emoji) {
            popup.textContent = `${emoji} ${message}`;
            popup.className = `celebration-popup show ${bgColor} text-white font-bold text-xl text-center`;
            setTimeout(() => {
                popup.classList.remove('show');
            }, 2000);
        }

        function startTimer() {
            let timeLeft = TIME_LIMIT;
            const progressBar = document.getElementById('time-progress');
            const timeDisplay = document.getElementById('time-left');

            progressBar.style.width = '100%';
            progressBar.classList.remove('bg-red-600', 'bg-indigo-600');
            progressBar.classList.add('bg-indigo-600');
            timeDisplay.textContent = `${timeLeft}s`;


            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                const percentage = (timeLeft / TIME_LIMIT) * 100;
                progressBar.style.width = `${percentage}%`;
                timeDisplay.textContent = `${timeLeft}s`;
                
                if (timeLeft < 5) {
                    progressBar.classList.remove('bg-indigo-600');
                    progressBar.classList.add('bg-red-600');
                }


                if (timeLeft <= 0) {
                    clearInterval(timer);
                    // Handle time's up - treat as incorrect answer
                    document.getElementById('question-title').textContent = "H·∫æT GI·ªú!";
                    
                    showPopup("H·∫øt gi·ªù! Xem gi·∫£i th√≠ch nh√©.", 'bg-red-500', 'üò•');
                    
                    // Show correct answer after delay
                    const options = document.querySelectorAll('.quiz-option');
                    options.forEach(option => {
                        option.onclick = null; // Disable further clicks
                        const correctIndex = quizQuestions[currentQuizIndex].answerOptions.findIndex(opt => opt.isCorrect).toString();
                        if (option.dataset.index === correctIndex) {
                            option.classList.add('correct-answer');
                        }
                    });
                    
                    const rationaleEl = document.getElementById('feedback-rationale');
                    const correctRationale = quizQuestions[currentQuizIndex].answerOptions.find(opt => opt.isCorrect).rationale;
                    rationaleEl.innerHTML = `**Gi·∫£i th√≠ch:** ${correctRationale}`;
                    rationaleEl.classList.remove('hidden');
                    rationaleEl.classList.add('bg-green-100', 'text-green-800');

                    setTimeout(nextQuizQuestion, 2500);
                }
            }, 1000);
        }

        function handleAnswer(selectedIndex) {
            clearInterval(timer); // Stop timer immediately
            const questionData = quizQuestions[currentQuizIndex];
            const selectedOption = questionData.answerOptions[selectedIndex];
            const options = document.querySelectorAll('.quiz-option');

            // Disable all options
            options.forEach(option => {
                option.onclick = null;
            });
            
            const rationaleEl = document.getElementById('feedback-rationale');
            const correctRationale = questionData.answerOptions.find(opt => opt.isCorrect).rationale;


            if (selectedOption.isCorrect) {
                options[selectedIndex].classList.add('correct-answer');
                score++;
                showPopup("Ch√≠nh x√°c! Xu·∫•t s·∫Øc!", 'bg-green-500', 'üéâ');
                rationaleEl.innerHTML = `**Gi·∫£i th√≠ch:** ${selectedOption.rationale}`;
                rationaleEl.classList.remove('hidden');
                rationaleEl.classList.add('bg-green-100', 'text-green-800');
            } else {
                options[selectedIndex].classList.add('incorrect-answer');
                
                // Highlight the correct answer
                const correctIndex = questionData.answerOptions.findIndex(opt => opt.isCorrect);
                options[correctIndex].classList.add('correct-answer');

                showPopup("Ch∆∞a ƒë√∫ng. ƒê·ª´ng n·∫£n l√≤ng!", 'bg-red-500', '‚ùå');
                rationaleEl.innerHTML = `**Gi·∫£i th√≠ch:** ${correctRationale}`;
                rationaleEl.classList.remove('hidden');
                rationaleEl.classList.add('bg-green-100', 'text-green-800');
            }

            // Move to the next question after a delay
            setTimeout(nextQuizQuestion, 2500);
        }


        function renderQuizQuestion() {
            if (currentQuizIndex >= quizQuestions.length) {
                renderQuizResult();
                return;
            }

            const q = quizQuestions[currentQuizIndex];
            
            // Generate options HTML
            const optionsHtml = q.answerOptions.map((option, index) => `
                <div 
                    class="quiz-option p-4 my-3 bg-white border border-gray-300 rounded-lg hover:bg-indigo-100" 
                    onclick="handleAnswer(${index})"
                    data-index="${index}"
                >
                    <span class="font-medium">${String.fromCharCode(65 + index)}.</span> ${option.text}
                </div>
            `).join('');

            contentArea.innerHTML = `
                <div class="quiz-container bg-indigo-50 p-6 md:p-8">
                    <div>
                        <!-- Question and Timer Header -->
                        <div class="flex justify-between items-center mb-4">
                            <h2 id="question-title" class="text-xl md:text-2xl font-bold text-indigo-700">C√¢u H·ªèi ${q.questionNumber}/${quizQuestions.length}</h2>
                            <div class="flex items-center space-x-2 bg-white px-3 py-1 rounded-full shadow">
                                <span class="text-sm font-semibold text-gray-700">Th·ªùi gian:</span>
                                <span id="time-left" class="text-lg font-bold text-red-600">15s</span>
                            </div>
                        </div>

                        <!-- Progress Bar -->
                        <div class="w-full bg-gray-200 rounded-full h-2 mb-6 overflow-hidden">
                            <div id="time-progress" class="progress-bar" style="width: 100%;"></div>
                        </div>

                        <!-- Question Text -->
                        <p class="text-lg md:text-xl font-semibold text-gray-800 mb-6 p-4 bg-white rounded-lg shadow-inner border-l-4 border-indigo-500">
                            ${q.question}
                        </p>

                        <!-- Answer Options -->
                        <div id="options-container" class="space-y-3">
                            ${optionsHtml}
                        </div>
                        
                        <!-- Feedback and Rationale -->
                        <div id="feedback-rationale" class="hidden mt-6 p-4 rounded-lg text-sm transition-all duration-300">
                        </div>
                    </div>

                    <!-- Hint -->
                    <div class="mt-8 text-sm text-gray-500 border-t pt-4">
                        <span class="font-semibold text-indigo-500">G·ª£i √Ω:</span> ${q.hint}
                    </div>
                </div>
            `;
            startTimer();
        }

        function nextQuizQuestion() {
            currentQuizIndex++;
            if (currentQuizIndex < quizQuestions.length) {
                renderQuizQuestion();
            } else {
                renderQuizResult();
            }
        }

        function renderQuizResult() {
            isQuizMode = false;
            clearInterval(timer);
            
            const total = quizQuestions.length;
            const percentage = (score / total) * 100;
            let feedbackText = "";
            let feedbackColor = "";

            if (percentage === 100) {
                feedbackText = "Xu·∫•t s·∫Øc! B·∫°n ƒë√£ n·∫Øm v·ªØng to√†n b·ªô ki·∫øn th·ª©c b√†i h·ªçc. üéâ";
                feedbackColor = "bg-green-600";
            } else if (percentage >= 70) {
                feedbackText = "R·∫•t t·ªët! B·∫°n hi·ªÉu b√†i kh√° r√µ, ch·ªâ c·∫ßn √¥n l·∫°i m·ªôt ch√∫t th√¥i. üëç";
                feedbackColor = "bg-yellow-600";
            } else {
                feedbackText = "C·ªë g·∫Øng l√™n! H√£y xem l·∫°i ph·∫ßn l√Ω thuy·∫øt v√† th·ª≠ l·∫°i nh√©. üí™";
                feedbackColor = "bg-red-600";
            }

            contentArea.innerHTML = `
                <div class="quiz-container text-center p-8 md:p-12 bg-white">
                    <h2 class="text-4xl font-extrabold text-indigo-700 mb-6">K·∫æT QU·∫¢ C·ª¶NG C·ªê</h2>
                    
                    <div class="p-6 rounded-xl shadow-2xl mx-auto max-w-sm ${feedbackColor} text-white">
                        <p class="text-xl font-medium">ƒêi·ªÉm c·ªßa b·∫°n:</p>
                        <p class="text-6xl font-black mt-2 mb-4">${score}/${total}</p>
                    </div>

                    <p class="text-2xl mt-8 font-semibold text-gray-700">${feedbackText}</p>
                    
                    <div class="mt-10 flex justify-center space-x-4">
                        <button onclick="renderSlide(0)" class="px-6 py-3 bg-indigo-500 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 transition duration-150">
                            √în l·∫°i B√†i h·ªçc (Slide 1)
                        </button>
                        <button onclick="startQuiz()" class="px-6 py-3 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-600 transition duration-150">
                            L√†m l·∫°i Tr·∫Øc nghi·ªám
                        </button>
                    </div>
                </div>
            `;
            
            // Restore navigation buttons
            prevBtn.style.display = 'inline-block';
            nextBtn.style.display = 'inline-block';
            nextBtn.disabled = true;
        }

        // Initialize the app
        window.onload = () => {
            renderSlide(0);
        };
    </script>
</body>
</html>