<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i H·ªçc V·∫≠t L√Ω: √Åp Su·∫•t Kh√≠ v√† ƒê·ªông NƒÉng Ph√¢n T·ª≠</title>
    <!-- T·∫£i Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- T·∫£i Three.js cho m√¥ ph·ªèng 3D -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
     <!-- T·∫£i MathJax cho c√¥ng th·ª©c to√°n h·ªçc -->
     <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']], // B·∫Øt bu·ªôc nh·∫≠n di·ªán $...$
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      // ...
    };
    </script>
    <style>
        /* Thi·∫øt l·∫≠p font Inter cho to√†n b·ªô trang */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7; /* M√†u n·ªÅn nh·∫π nh√†ng */
        }
        /* Style cho c√°c c√¥ng th·ª©c, ƒë·∫£m b·∫£o d·ªÖ ƒë·ªçc */
        .math-formula {
            font-size: 1.15rem;
            font-weight: 700;
            color: #333;
            background-color: #e5e7eb;
            padding: 0.75rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
            text-align: center;
            overflow-x: auto; /* ƒê·∫£m b·∫£o c√¥ng th·ª©c d√†i kh√¥ng l√†m tr√†n */
        }
        .math-formula span {
            font-family: 'Times New Roman', serif; /* D√πng font c·ªï ƒëi·ªÉn h∆°n cho k√Ω hi·ªáu */
        }
        .col-card {
            min-height: 100%;
        }
        /* CSS cho c·ªôt 1 (M√¥ t·∫£) */
        .col-1-bg {
            background-color: #eff6ff; /* Blue 50 */
            border: 2px solid #93c5fd; /* Blue 300 */
        }
        /* CSS cho c·ªôt 2 (Ki·∫øn th·ª©c) */
        .col-2-bg {
            background-color: #f0fdf4; /* Green 50 */
            border: 2px solid #4ade80; /* Green 400 */
        }
        #gas-simulation-container {
            width: 100%;
            height: 400px;
            background-color: #f0f4f8;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
        }
        .mcq-option {
            transition: all 0.2s;
        }
        .mcq-option:not(.disabled-option):hover {
            background-color: #e0f7fa;
            cursor: pointer;
        }
        .correct-answer {
            background-color: #dcfce7 !important; /* green-100 */
            border-color: #10b981 !important; /* green-500 */
        }
        .incorrect-answer {
            background-color: #fee2e2 !important; /* red-100 */
            border-color: #ef4444 !important; /* red-500 */
        }
        .selected-answer {
            background-color: #bfdbfe; /* blue-200 */
            border-color: #3b82f6; /* blue-500 */
        }
        .disabled-input, .disabled-option {
            opacity: 0.7;
            pointer-events: none;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Ti√™u ƒë·ªÅ B√†i h·ªçc -->
        <header class="text-center mb-10">
            <h1 class="text-2xl md:text-1xl font-bold text-indigo-800 tracking-tight">
                √ÅP SU·∫§T KH√ç V√Ä ƒê·ªòNG NƒÇNG PH√ÇN T·ª¨
            </h1>
            <p class="text-xl text-gray-600 mt-2 italic">(√Åp d·ª•ng cho M√¥ h√¨nh Kh√≠ l√Ω t∆∞·ªüng)</p>
        </header>

        <!-- Kh·ªëi B√†i h·ªçc - Responsive Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

            <!-- C·ªôt 1: M√¥ t·∫£ Chuy·ªÉn ƒë·ªông H·ªón lo·∫°n c·ªßa Ph√¢n t·ª≠ Kh√≠ -->
            <div class="col-card col-1-bg p-6 rounded-2xl shadow-xl">
                <h2 class="text-3xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-400 pb-2">
                    M√¥ t·∫£ Chuy·ªÉn ƒë·ªông H·ªón lo·∫°n
                </h2>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">M√¥ ph·ªèng 3D: Chuy·ªÉn ƒë·ªông H·ªón lo·∫°n</h3>
                    <p class="text-sm text-indigo-700 mb-3 italic">
                        S·ª≠ d·ª•ng chu·ªôt (k√©o) ƒë·ªÉ thay ƒë·ªïi g√≥c nh√¨n m√¥ ph·ªèng.
                    </p>
                    <!-- Khung ch·ª©a m√¥ ph·ªèng 3D -->
                    <div id="gas-simulation-container"></div>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">1. Chuy·ªÉn ƒë·ªông H·ªón lo·∫°n Ph√¢n t·ª≠ Kh√≠</h3>
                    <p class="text-gray-700 leading-relaxed">
                        <strong>M√¥ h√¨nh C∆° s·ªü (H√¨nh h·ªôp k√≠n):</strong> C√°c ph√¢n t·ª≠ kh√≠ trong b√¨nh k√≠n chuy·ªÉn ƒë·ªông 
                        <span class="font-bold text-indigo-700">h·ªón lo·∫°n (Brownian)</span> kh√¥ng ng·ª´ng theo m·ªçi ph∆∞∆°ng, m·ªçi chi·ªÅu v·ªõi t·ªëc ƒë·ªô r·∫•t l·ªõn (h√†ng trƒÉm m/s) v√† ho√†n to√†n ng·∫´u nhi√™n.
                    </p>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Va ch·∫°m:</h3>
                    <ul class="list-disc list-inside text-gray-700 ml-4 space-y-2">
                        <li>Va ch·∫°m ƒë√†n h·ªìi v·ªõi nhau v√† v·ªõi th√†nh b√¨nh.</li>
                        <li>Sau va ch·∫°m, c√°c ph√¢n t·ª≠ ƒë·ªïi h∆∞·ªõng v√† thay ƒë·ªïi ƒë·ªô l·ªõn v·∫≠n t·ªëc theo quy lu·∫≠t ng·∫´u nhi√™n.</li>
                    </ul>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Qu√£ng ƒë∆∞·ªùng & Th·ªùi gian va ch·∫°m:</h3>
                    <ul class="list-disc list-inside text-gray-700 ml-4 space-y-2">
                        <li>
                            <span class="font-medium">Qu√£ng ƒë∆∞·ªùng t·ª± do trung b√¨nh ($\lambda$):</span> L√† qu√£ng ƒë∆∞·ªùng trung b√¨nh m√† m·ªôt ph√¢n t·ª≠ ƒëi ƒë∆∞·ª£c gi·ªØa hai l·∫ßn va ch·∫°m li√™n ti·∫øp.
                        </li>
                        <li>
                            <span class="font-medium">Th·ªùi gian va ch·∫°m ($\tau$):</span> L√† th·ªùi gian trung b√¨nh gi·ªØa hai l·∫ßn va ch·∫°m li√™n ti·∫øp.
                        </li>
                        <li>
                            <span class="font-medium">M·ªëi li√™n h·ªá:</span> $\lambda = \overline{v} \times \tau$ (v·ªõi $\overline{v}$ l√† v·∫≠n t·ªëc trung b√¨nh).
                        </li>
                    </ul>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Th·ªùi gian gi·ªØa c√°c va ch·∫°m tr√™n th√†nh b√¨nh:</h3>
                    <p class="text-gray-700 leading-relaxed">
                        Khi x√©t va ch·∫°m v·ªõi m·ªôt th√†nh b√¨nh c·ª• th·ªÉ (gi·∫£ s·ª≠ c√≥ chi·ªÅu d√†i $L$ theo ph∆∞∆°ng chuy·ªÉn ƒë·ªông), ph√¢n t·ª≠ s·∫Ω ƒëi qu√£ng ƒë∆∞·ªùng $d=2L$ gi·ªØa hai l·∫ßn va ch·∫°m li√™n ti·∫øp v·ªõi th√†nh ƒë√≥.
                        Th·ªùi gian t∆∞∆°ng ·ª©ng l√† $\Delta t = \frac{2L}{v_{va ch·∫°m}}$.
                    </p>
                </div>

            </div>

            <!-- C·ªôt 2: Ki·∫øn th·ª©c li√™n quan ƒë·∫øn √Åp su·∫•t v√† ƒê·ªông nƒÉng -->
            <div class="col-card col-2-bg p-6 rounded-2xl shadow-xl">
                <h2 class="text-2xl font-bold text-green-700 mb-6 border-b-4 border-green-400 pb-2">
                    Ki·∫øn th·ª©c √Åp su·∫•t v√† ƒê·ªông nƒÉng
                </h2>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-green-600 mb-2">2. Ngu·ªìn g·ªëc c·ªßa √Åp su·∫•t Kh√≠</h3>
                    <p class="text-gray-700 leading-relaxed">
                        <strong>1/ ·∫¢nh h∆∞·ªüng Va ch·∫°m l√™n th√†nh b√¨nh d·∫´n ƒë·∫øn √Åp su·∫•t</strong>
                        <br> √Åp su·∫•t kh√≠ l√™n th√†nh b√¨nh ƒë∆∞·ª£c t·∫°o ra do:
                    </p>
                    <ul class="list-disc list-inside text-gray-700 ml-4 space-y-2 mt-2">
                        <li>S·ª± va ch·∫°m li√™n t·ª•c v√† c·ª±c k·ª≥ nhi·ªÅu c·ªßa c√°c ph√¢n t·ª≠ kh√≠ l√™n th√†nh b√¨nh.</li>
                        <li>M·ªói va ch·∫°m l√†m thay ƒë·ªïi ƒë·ªông l∆∞·ª£ng ($\Delta \vec{p}$) c·ªßa ph√¢n t·ª≠, t·∫°o ra m·ªôt l·ª±c ƒë·∫©y (xung l·ª±c).</li>
                        <li>T·ªïng h·ª£p l·ª±c ƒë·∫©y trung b√¨nh l√™n m·ªôt ƒë∆°n v·ªã di·ªán t√≠ch ch√≠nh l√† <strong>√Åp su·∫•t (P)</strong>.</li>
                    </ul>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-green-600 mb-2">2/ Bi·ªÉu th·ª©c C∆° b·∫£n c·ªßa √Åp su·∫•t Kh√≠</h3>
                    <p class="font-medium text-gray-700 mb-2">Tr√¨nh b√†y c√°ch ch·ª©ng minh (CM):</p>

                    <!-- CM A -->
                    <p class="text-sm font-medium text-gray-600 mt-3">A. X√©t m·ªôt ph√¢n t·ª≠:</p>
                    <ul class="text-gray-700 text-sm ml-4 list-disc">
                        <li>ƒê·ªô bi·∫øn thi√™n ƒë·ªông l∆∞·ª£ng: $\Delta p = 2 m v_x$.</li>
                        <li>Th·ªùi gian gi·ªØa 2 va ch·∫°m: $\Delta t = 2L/v_x$.</li>
                        <li>L·ª±c trung b√¨nh: $F_1 = \frac{\Delta p}{\Delta t} = \frac{m v_x^2}{L}$.</li>
                    </ul>

                    <!-- CM B -->
                    <p class="text-sm font-medium text-gray-600 mt-3">B. X√©t N ph√¢n t·ª≠ trong th·ªÉ t√≠ch V:</p>
                    <ul class="text-gray-700 text-sm ml-4 list-disc">
                        <li>Trung b√¨nh ph∆∞∆°ng v·∫≠n t·ªëc: $\overline{v_x^2} = \frac{1}{3} \overline{v^2}$.</li>
                        <li>T·ªïng l·ª±c: $F = N \frac{m \overline{v_x^2}}{L} = \frac{1}{3} \frac{N m \overline{v^2}}{L}$.</li>
                    </ul>

                    <!-- C√¥ng th·ª©c P -->
                    <p class="text-sm font-medium text-gray-600 mt-3">C. Bi·ªÉu th·ª©c √Åp su·∫•t (P) (V√¨ $V = L^3$):</p>
                    <div class="math-formula bg-green-200">
                        <span class="text-2xl">P = $\frac{1}{3}.\frac{N}{V}. m.\overline{v^2}$</span>
                    </div>

                    <p class="font-medium text-gray-700 mt-4">Li·ªát k√™ c√°c ƒê·∫°i l∆∞·ª£ng li√™n quan:</p>
                    <ul class="text-gray-700 ml-4 list-disc">
                        <li>$P$: √Åp su·∫•t (Pa)</li>
                        <li>$N$: T·ªïng s·ªë ph√¢n t·ª≠</li>
                        <li>$V$: Th·ªÉ t√≠ch b√¨nh ($m^3$)</li>
                        <li>$m$: Kh·ªëi l∆∞·ª£ng 1 ph√¢n t·ª≠ (kg)</li>
                        <li>$\overline{v^2}$: <span class="font-semibold">B√¨nh ph∆∞∆°ng trung b√¨nh v·∫≠n t·ªëc</span> ($m^2/s^2$)</li>
                    </ul>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-green-600 mb-2">3/ ƒê·ªông nƒÉng Ph√¢n t·ª≠ (Trung b√¨nh)</h3>
                    <p class="text-gray-700">ƒê·ªông nƒÉng t·ªãnh ti·∫øn trung b√¨nh ($\overline{W_d}$) c·ªßa m·ªôt ph√¢n t·ª≠:</p>
                    <div class="math-formula bg-green-200">
                        <span class="text-2xl">$\overline{W_d} = \frac{1}{2}.m.\overline{v^2}$</span>
                    </div>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-green-600 mb-2">4/ Li√™n h·ªá gi·ªØa √Åp su·∫•t v√† ƒê·ªông nƒÉng</h3>
                    <p class="text-gray-700">Thay bi·ªÉu th·ª©c ƒë·ªông nƒÉng v√†o c√¥ng th·ª©c √Åp su·∫•t:</p>
                    <div class="math-formula bg-green-200">
                        <span class="text-2xl">$P = \frac{2}{3}.\frac{N}{V}.\overline{W_d}$</span>
                    </div>
                    <p class="font-medium text-green-700 mt-4">
                        <span class="font-bold">K·∫øt lu·∫≠n:</span> √Åp su·∫•t c·ªßa kh√≠ l√Ω t∆∞·ªüng t·ªâ l·ªá thu·∫≠n v·ªõi m·∫≠t ƒë·ªô ph√¢n t·ª≠ ($\frac{N}{V}$) v√† ƒë·ªông nƒÉng t·ªãnh ti·∫øn trung b√¨nh ($\overline{W_d}$) c·ªßa c√°c ph√¢n t·ª≠.
                    </p>
                </div>
                
                <!-- Ph·∫ßn M·ªü r·ªông -->
                <div class="mt-8 pt-4 border-t border-green-400">
                    <h3 class="text-2xl font-bold text-green-800 mb-4">M·ªü r·ªông (N√¢ng cao)</h3>
                    <p class="text-gray-700 mb-2">
                        <span class="font-medium">Nhi·ªát ƒë·ªô (T):</span> ƒê·ªông nƒÉng t·ªãnh ti·∫øn trung b√¨nh li√™n h·ªá tr·ª±c ti·∫øp v·ªõi Nhi·ªát ƒë·ªô Tuy·ªát ƒë·ªëi ($T$):
                    </p>
                    <div class="math-formula bg-yellow-100 border-yellow-500">
                        <span class="text-2xl">$\overline{W_d} = \frac{3}{2}.k.T$</span>
                    </div>
                    <p class="text-gray-700 mt-4">
                        <span class="font-medium">Ph∆∞∆°ng tr√¨nh Tr·∫°ng th√°i Kh√≠ L√Ω t∆∞·ªüng:</span>
                    </p>
                    <div class="math-formula bg-yellow-100 border-yellow-500">
                        <span class="text-2xl">$PV = N. k.T$</span>
                    </div>
                    <p class="text-gray-600 italic text-sm">
                        (k l√† h·∫±ng s·ªë Boltzmann)
                    </p>
                </div>
                
                <!-- PH·∫¶N C·ª¶NG C·ªê KI·∫æN TH·ª®C (QUIZ) -->
                <div class="mt-10 pt-6 border-t-4 border-green-600">
                    <h3 class="text-2xl font-bold text-green-800 mb-6">C·ªßng C·ªë Ki·∫øn Th·ª©c</h3>
                    
                    <div id="quiz-questions" class="space-y-6">
                        <!-- C√¢u h·ªèi 1 (MCQ) -->
                        <div class="quiz-item p-4 bg-white rounded-lg shadow" data-type="mcq" data-correct="C">
                            <p class="font-semibold mb-3 text-gray-800">1. √Åp su·∫•t kh√≠ l√™n th√†nh b√¨nh ƒë∆∞·ª£c t·∫°o ra tr·ª±c ti·∫øp do y·∫øu t·ªë n√†o?</p>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md mb-2" data-answer="A">A. Tr·ªçng l∆∞·ª£ng c·ªßa ph√¢n t·ª≠ kh√≠.</div>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md mb-2" data-answer="B">B. L·ª±c h√∫t gi·ªØa c√°c ph√¢n t·ª≠ kh√≠.</div>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md mb-2" data-answer="C">C. S·ª± va ch·∫°m li√™n t·ª•c c·ªßa c√°c ph√¢n t·ª≠ l√™n th√†nh b√¨nh.</div>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md" data-answer="D">D. S·ª± chuy·ªÉn ƒë·ªông c√≥ tr·∫≠t t·ª± c·ªßa ph√¢n t·ª≠.</div>
                            <p class="feedback mt-2 text-sm italic"></p>
                        </div>

                        <!-- C√¢u h·ªèi 2 (MCQ) -->
                        <div class="quiz-item p-4 bg-white rounded-lg shadow" data-type="mcq" data-correct="D">
                            <p class="font-semibold mb-3 text-gray-800">2. Trong bi·ªÉu th·ª©c $P = \frac{1}{3} \frac{N}{V} m \overline{v^2}$, ƒë·∫°i l∆∞·ª£ng $\overline{v^2}$ l√† g√¨?</p>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md mb-2" data-answer="A">A. V·∫≠n t·ªëc trung b√¨nh c·ªßa ph√¢n t·ª≠.</div>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md mb-2" data-answer="B">B. V·∫≠n t·ªëc c·ª±c ƒë·∫°i c·ªßa ph√¢n t·ª≠.</div>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md mb-2" data-answer="C">C. B√¨nh ph∆∞∆°ng v·∫≠n t·ªëc c·ªßa m·ªôt ph√¢n t·ª≠.</div>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md" data-answer="D">D. B√¨nh ph∆∞∆°ng trung b√¨nh v·∫≠n t·ªëc c·ªßa ph√¢n t·ª≠.</div>
                            <p class="feedback mt-2 text-sm italic"></p>
                        </div>

                        <!-- C√¢u h·ªèi 3 (MCQ) -->
                        <div class="quiz-item p-4 bg-white rounded-lg shadow" data-type="mcq" data-correct="B">
                            <p class="font-semibold mb-3 text-gray-800">3. √Åp su·∫•t $P$ c·ªßa kh√≠ l√Ω t∆∞·ªüng t·ªâ l·ªá thu·∫≠n v·ªõi ƒë·∫°i l∆∞·ª£ng n√†o sau ƒë√¢y?</p>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md mb-2" data-answer="A">A. Th·ªÉ t√≠ch $V$.</div>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md mb-2" data-answer="B">B. M·∫≠t ƒë·ªô ph√¢n t·ª≠ $\frac{N}{V}$ v√† ƒê·ªông nƒÉng trung b√¨nh $\overline{W_d}$.</div>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md mb-2" data-answer="C">C. Kh·ªëi l∆∞·ª£ng ph√¢n t·ª≠ $m$.</div>
                            <div class="mcq-option p-2 border border-gray-200 rounded-md" data-answer="D">D. Th·ªùi gian gi·ªØa c√°c va ch·∫°m $\tau$.</div>
                            <p class="feedback mt-2 text-sm italic"></p>
                        </div>

                        <!-- C√¢u h·ªèi 4 (ƒêi·ªÅn s·ªë) -->
                        <div class="quiz-item p-4 bg-white rounded-lg shadow" data-type="numerical" data-correct="40000" data-tolerance="0">
                            <p class="font-semibold mb-3 text-gray-800">4. N·∫øu $\overline{W_d} = 6 \times 10^{-21}$ J v√† m·∫≠t ƒë·ªô ph√¢n t·ª≠ $\frac{N}{V} = 10^{25}$ ph√¢n t·ª≠/$\text{m}^3$. S·ª≠ d·ª•ng c√¥ng th·ª©c $P = \frac{2}{3} \frac{N}{V} \overline{W_d}$, h√£y t√≠nh √Åp su·∫•t $P$ (ƒë∆°n v·ªã Pa).</p>
                            <input type="number" step="any" id="q4-input" class="q-input w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" placeholder="Nh·∫≠p k·∫øt qu·∫£ (Pa)">
                            <p class="feedback mt-2 text-sm italic"></p>
                        </div>

                        <!-- C√¢u h·ªèi 5 (ƒêi·ªÅn s·ªë) -->
                        <div class="quiz-item p-4 bg-white rounded-lg shadow" data-type="numerical" data-correct="9e-21" data-tolerance="1e-22">
                            <p class="font-semibold mb-3 text-gray-800">5. N·∫øu ƒê·ªông nƒÉng t·ªãnh ti·∫øn trung b√¨nh $\overline{W_d}$ c·ªßa m·ªôt ph√¢n t·ª≠ l√† $4.5 \times 10^{-21}$ J, h√£y t√≠nh gi√° tr·ªã c·ªßa $m \overline{v^2}$ (ƒë∆°n v·ªã J). (S·ª≠ d·ª•ng $\overline{W_d} = \frac{1}{2} m \overline{v^2}$)</p>
                            <input type="text" id="q5-input" class="q-input w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" placeholder="Nh·∫≠p k·∫øt qu·∫£ (v√≠ d·ª•: 9e-21)">
                            <p class="feedback mt-2 text-sm italic"></p>
                        </div>
                    </div>

                    <div class="flex space-x-4 mt-6">
                        <button id="check-quiz-btn" class="w-1/2 py-3 px-4 bg-green-600 text-white font-bold rounded-xl shadow-lg hover:bg-green-700 transition duration-200">
                            Ki·ªÉm Tra ƒê√°p √Ån
                        </button>
                        <button id="reset-quiz-btn" class="w-1/2 py-3 px-4 bg-gray-400 text-white font-bold rounded-xl shadow-lg hover:bg-gray-500 transition duration-200">
                            L√†m L·∫°i Quiz
                        </button>
                    </div>
                    
                    <div id="quiz-result" class="mt-4 text-center text-xl font-bold p-3 rounded-xl hidden"></div>
                </div>

            </div>
            
        </div>
    </div>

    <script>
        // --- LOGIC M√î PH·ªéNG 3D (THREE.JS) ---
        window.onload = function() {
            // --- C√ÄI ƒê·∫∂T C∆† B·∫¢N ---
            const container = document.getElementById('gas-simulation-container');
            if (!container) {
                // N·∫øu kh√¥ng t√¨m th·∫•y container (v√≠ d·ª•: trong m√¥i tr∆∞·ªùng kh√¥ng ph·∫£i tr√¨nh duy·ªát), tho√°t
                return; 
            }
            
            let WIDTH = container.clientWidth;
            let HEIGHT = container.clientHeight;
            const BOX_SIZE = 100; // K√≠ch th∆∞·ªõc c·ªßa h·ªôp ch·ª©a
            const PARTICLE_COUNT = 50; // S·ªë l∆∞·ª£ng ph√¢n t·ª≠
            const PARTICLE_RADIUS = 3;
            const MAX_VELOCITY = 1.0;
            
            let renderer, scene, camera;
            let particles = [];
            let isDragging = false;
            let previousMouseX = 0, previousMouseY = 0;

            // --- KH·ªûI T·∫†O C·∫¢NH ---
            function init() {
                // Renderer
                renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(WIDTH, HEIGHT);
                container.appendChild(renderer.domElement);

                // Scene
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0xf0f4f8);

                // Camera
                camera = new THREE.PerspectiveCamera(75, WIDTH / HEIGHT, 1, 1000);
                camera.position.set(0, 0, 150);
                camera.lookAt(0, 0, 0);

                // √Ånh s√°ng
                const ambientLight = new THREE.AmbientLight(0x404040);
                scene.add(ambientLight);
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
                directionalLight.position.set(1, 1, 1);
                scene.add(directionalLight);

                // T·∫°o H·ªôp ch·ª©a (Box) - Ch·ªâ hi·ªÉn th·ªã d·∫°ng khung l∆∞·ªõi
                const boxGeometry = new THREE.BoxGeometry(BOX_SIZE * 2, BOX_SIZE * 2, BOX_SIZE * 2);
                const boxEdges = new THREE.EdgesGeometry(boxGeometry);
                const boxLine = new THREE.LineSegments(boxEdges, new THREE.LineBasicMaterial({ color: 0x4a5568 }));
                scene.add(boxLine);

                // T·∫°o c√°c Ph√¢n t·ª≠
                const particleGeometry = new THREE.SphereGeometry(PARTICLE_RADIUS, 12, 12);
                for (let i = 0; i < PARTICLE_COUNT; i++) {
                    const material = new THREE.MeshPhongMaterial({ color: Math.random() * 0xffffff });
                    const particle = new THREE.Mesh(particleGeometry, material);

                    // Thi·∫øt l·∫≠p v·ªã tr√≠ v√† v·∫≠n t·ªëc ng·∫´u nhi√™n
                    particle.position.x = (Math.random() * 2 - 1) * (BOX_SIZE - PARTICLE_RADIUS);
                    particle.position.y = (Math.random() * 2 - 1) * (BOX_SIZE - PARTICLE_RADIUS);
                    particle.position.z = (Math.random() * 2 - 1) * (BOX_SIZE - PARTICLE_RADIUS);

                    particle.velocity = new THREE.Vector3(
                        (Math.random() * 2 - 1) * MAX_VELOCITY,
                        (Math.random() * 2 - 1) * MAX_VELOCITY,
                        (Math.random() * 2 - 1) * MAX_VELOCITY
                    );
                    
                    particles.push(particle);
                    scene.add(particle);
                }

                // Thi·∫øt l·∫≠p s·ª± ki·ªán ƒëi·ªÅu khi·ªÉn camera b·∫±ng chu·ªôt
                container.addEventListener('mousedown', onMouseDown, false);
                window.addEventListener('mouseup', onMouseUp, false);
                container.addEventListener('mousemove', onMouseMove, false);
                window.addEventListener('resize', onWindowResize, false);
            }

            // --- V√íNG L·∫∂P ANIMATION (M√¥ ph·ªèng) ---
            function animate() {
                requestAnimationFrame(animate);

                // Xoay h·ªôp ƒë·ªÉ t·∫°o hi·ªáu ·ª©ng 3D
                if (!isDragging) {
                    scene.rotation.y += 0.001;
                    scene.rotation.x += 0.0005;
                }

                // C·∫≠p nh·∫≠t v·ªã tr√≠ v√† ki·ªÉm tra va ch·∫°m
                particles.forEach(particle => {
                    // C·∫≠p nh·∫≠t v·ªã tr√≠
                    particle.position.add(particle.velocity);

                    // Ki·ªÉm tra va ch·∫°m v·ªõi th√†nh b√¨nh (va ch·∫°m ƒë√†n h·ªìi)
                    if (particle.position.x > BOX_SIZE - PARTICLE_RADIUS || particle.position.x < -BOX_SIZE + PARTICLE_RADIUS) {
                        particle.velocity.x *= -1; // ƒê·ªïi chi·ªÅu v·∫≠n t·ªëc
                        // ƒê·∫∑t l·∫°i v·ªã tr√≠ ƒë·ªÉ tr√°nh k·∫πt
                        particle.position.x = THREE.MathUtils.clamp(particle.position.x, -BOX_SIZE + PARTICLE_RADIUS, BOX_SIZE - PARTICLE_RADIUS);
                    }
                    if (particle.position.y > BOX_SIZE - PARTICLE_RADIUS || particle.position.y < -BOX_SIZE + PARTICLE_RADIUS) {
                        particle.velocity.y *= -1;
                        particle.position.y = THREE.MathUtils.clamp(particle.position.y, -BOX_SIZE + PARTICLE_RADIUS, BOX_SIZE - PARTICLE_RADIUS);
                    }
                    if (particle.position.z > BOX_SIZE - PARTICLE_RADIUS || particle.position.z < -BOX_SIZE + PARTICLE_RADIUS) {
                        particle.velocity.z *= -1;
                        particle.position.z = THREE.MathUtils.clamp(particle.position.z, -BOX_SIZE + PARTICLE_RADIUS, BOX_SIZE - PARTICLE_RADIUS);
                    }
                });

                renderer.render(scene, camera);
            }

            // --- ƒêI·ªÄU KHI·ªÇN CHU·ªòT (XOAY CAMERA) ---

            function onMouseDown(event) {
                isDragging = true;
                previousMouseX = event.clientX;
                previousMouseY = event.clientY;
            }

            function onMouseUp(event) {
                isDragging = false;
            }

            function onMouseMove(event) {
                if (!isDragging) return;

                const deltaX = event.clientX - previousMouseX;
                const deltaY = event.clientY - previousMouseY;

                // Xoay to√†n b·ªô Scene d·ª±a tr√™n chuy·ªÉn ƒë·ªông c·ªßa chu·ªôt
                scene.rotation.y += deltaX * 0.01;
                scene.rotation.x += deltaY * 0.01;

                previousMouseX = event.clientX;
                previousMouseY = event.clientY;
            }

            // X·ª≠ l√Ω thay ƒë·ªïi k√≠ch th∆∞·ªõc c·ª≠a s·ªï
            function onWindowResize() {
                WIDTH = container.clientWidth;
                HEIGHT = container.clientHeight;
                if (camera) {
                    camera.aspect = WIDTH / HEIGHT;
                    camera.updateProjectionMatrix();
                }

                if (renderer) {
                    renderer.setSize(WIDTH, HEIGHT);
                }
            }
            
            init();
            animate();
        };

        // --- LOGIC QUIZ ---
        document.addEventListener('DOMContentLoaded', () => {
            const quizItems = document.querySelectorAll('.quiz-item');
            const checkBtn = document.getElementById('check-quiz-btn');
            const resetBtn = document.getElementById('reset-quiz-btn');
            const quizResult = document.getElementById('quiz-result');
            let totalQuestions = quizItems.length;

            // X·ª≠ l√Ω ch·ªçn ƒë√°p √°n tr·∫Øc nghi·ªám
            quizItems.forEach(item => {
                if (item.getAttribute('data-type') === 'mcq') {
                    item.querySelectorAll('.mcq-option').forEach(option => {
                        option.addEventListener('click', function() {
                            // Ch·ªâ cho ph√©p ch·ªçn n·∫øu ch∆∞a ki·ªÉm tra
                            if (!checkBtn.disabled) {
                                // X√≥a l·ªõp 'selected' c≈©
                                item.querySelectorAll('.mcq-option').forEach(opt => {
                                    opt.classList.remove('selected-answer');
                                });
                                // Th√™m l·ªõp 'selected' m·ªõi
                                this.classList.add('selected-answer');
                            }
                        });
                    });
                }
            });

            checkBtn.addEventListener('click', checkAnswers);
            resetBtn.addEventListener('click', resetQuiz);

            /**
             * Ki·ªÉm tra v√† ch·∫•m ƒëi·ªÉm c√°c c√¢u tr·∫£ l·ªùi.
             */
            function checkAnswers() {
                let score = 0;
                let allAnswered = true;

                quizItems.forEach(item => {
                    const type = item.getAttribute('data-type');
                    const correctValue = item.getAttribute('data-correct');
                    const feedbackElement = item.querySelector('.feedback');
                    let isCorrect = false;

                    // FIX 1: Khai b√°o rawInput trong ph·∫°m vi c·ªßa m·ªói item ƒë·ªÉ tr√°nh ReferenceError
                    let rawInput = null; 

                    // Reset feedback
                    feedbackElement.textContent = '';
                    feedbackElement.classList.remove('text-green-600', 'text-red-600');

                    // Reset styling cho l·∫ßn ch·∫•m ƒëi·ªÉm n√†y
                    item.querySelectorAll('.mcq-option').forEach(opt => {
                        opt.classList.remove('correct-answer', 'incorrect-answer'); 
                    });
                    item.querySelector('input')?.classList.remove('correct-answer', 'incorrect-answer');


                    if (type === 'mcq') {
                        const selectedOption = item.querySelector('.mcq-option.selected-answer');
                        
                        // V√¥ hi·ªáu h√≥a t·∫•t c·∫£ c√°c option MCQ sau khi ki·ªÉm tra
                        item.querySelectorAll('.mcq-option').forEach(opt => opt.classList.add('disabled-option'));
                        
                        if (selectedOption) {
                            const userAnswer = selectedOption.getAttribute('data-answer');
                            
                            // Highlight ƒë√°p √°n ƒë√∫ng/sai
                            if (userAnswer === correctValue) {
                                isCorrect = true;
                                selectedOption.classList.add('correct-answer');
                            } else {
                                selectedOption.classList.add('incorrect-answer');
                                // Highlight ƒë√°p √°n ƒë√∫ng
                                item.querySelector(`[data-answer="${correctValue}"]`).classList.add('correct-answer');
                            }
                        } else {
                            allAnswered = false;
                            // Highlight ƒë√°p √°n ƒë√∫ng m·∫∑c d√π ch∆∞a tr·∫£ l·ªùi
                            item.querySelector(`[data-answer="${correctValue}"]`)?.classList.add('correct-answer');
                        }
                    } else if (type === 'numerical') {
                        const inputElement = item.querySelector('.q-input');
                        // FIX 2: G√°n gi√° tr·ªã cho rawInput (ƒë√£ khai b√°o ·ªü tr√™n)
                        rawInput = inputElement.value.trim();
                        
                        // V√¥ hi·ªáu h√≥a input sau khi ki·ªÉm tra
                        inputElement.classList.add('disabled-input');
                        inputElement.setAttribute('disabled', 'true');
                        
                        if (rawInput === '') {
                            allAnswered = false;
                        } else {
                            // X·ª≠ l√Ω gi√° tr·ªã s·ªë (cho ph√©p k√Ω hi·ªáu khoa h·ªçc)
                            const userAnswer = parseFloat(rawInput);
                            const correctAnswer = parseFloat(correctValue);
                            // D√πng gi√° tr·ªã tuy·ªát ƒë·ªëi ƒë·ªÉ so s√°nh sai s·ªë
                            const tolerance = parseFloat(item.getAttribute('data-tolerance')) || 0;

                            if (!isNaN(userAnswer) && Math.abs(userAnswer - correctAnswer) <= tolerance) {
                                isCorrect = true;
                                inputElement.classList.add('correct-answer');
                            } else {
                                inputElement.classList.add('incorrect-answer');
                            }
                        }
                    }

                    // --- LOGIC PH·∫¢N H·ªíI (FEEDBACK) ---
                    if (isCorrect) {
                        score++;
                        feedbackElement.textContent = 'Ch√≠nh x√°c! üéâ';
                        feedbackElement.classList.add('text-green-600');
                    } else if (allAnswered) { // N·∫øu ƒë√£ tr·∫£ l·ªùi (allAnswered v·∫´n l√† true) nh∆∞ng ƒë√°p √°n sai
                        feedbackElement.textContent = 'Ch∆∞a ch√≠nh x√°c. Xem l·∫°i ph·∫ßn ki·∫øn th·ª©c li√™n quan.';
                        feedbackElement.classList.add('text-red-600');
                        
                        // ƒê·ªëi v·ªõi c√¢u ƒëi·ªÅn s·ªë, hi·ªÉn th·ªã ƒë√°p √°n n·∫øu sai
                        if (type === 'numerical') {
                             feedbackElement.textContent += ` (ƒê√°p √°n ƒë√∫ng: ${correctValue})`;
                        }
                    }
                    // Tr∆∞·ªùng h·ª£p ch∆∞a tr·∫£ l·ªùi (allAnswered = false) s·∫Ω ƒë∆∞·ª£c x·ª≠ l√Ω sau v√≤ng l·∫∑p
                });

                // Hi·ªÉn th·ªã c·∫£nh b√°o n·∫øu ch∆∞a tr·∫£ l·ªùi h·∫øt
                if (!allAnswered) {
                    // K√≠ch ho·∫°t l·∫°i n√∫t ki·ªÉm tra
                    checkBtn.disabled = false;
                    checkBtn.classList.remove('disabled-input', 'opacity-50');

                    quizResult.classList.remove('hidden');
                    quizResult.textContent = `Vui l√≤ng tr·∫£ l·ªùi t·∫•t c·∫£ c√°c c√¢u h·ªèi tr∆∞·ªõc khi ki·ªÉm tra!`;
                    quizResult.className = `mt-4 text-center text-xl font-bold p-3 rounded-xl bg-red-100 text-red-800`;
                    
                    // Reset Quiz (ch·ªâ x√≥a k·∫øt qu·∫£, gi·ªØ l·∫°i input ƒë·ªÉ ng∆∞·ªùi d√πng nh·∫≠p ti·∫øp)
                    resetQuiz(true); 
                    return;
                }
                
                // V√¥ hi·ªáu h√≥a n√∫t ki·ªÉm tra sau khi ch·∫•m ƒëi·ªÉm th√†nh c√¥ng
                checkBtn.disabled = true;
                checkBtn.classList.add('disabled-input', 'opacity-50');

                // Hi·ªÉn th·ªã k·∫øt qu·∫£ t·ªïng h·ª£p
                quizResult.classList.remove('hidden');
                quizResult.textContent = `B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ${score} / ${totalQuestions} c√¢u.`;
                quizResult.className = `mt-4 text-center text-xl font-bold p-3 rounded-xl`;
                if (score === totalQuestions) {
                    quizResult.classList.add('bg-green-100', 'text-green-800');
                } else if (score > totalQuestions / 2) {
                    quizResult.classList.add('bg-yellow-100', 'text-yellow-800');
                } else {
                    quizResult.classList.add('bg-red-100', 'text-red-800');
                }
            }

            /**
             * ƒê·∫∑t l·∫°i Quiz, cho ph√©p gi·ªØ l·∫°i input n·∫øu ƒë∆∞·ª£c g·ªçi t·ª´ checkAnswers (keepInput = true)
             */
            function resetQuiz(keepInput = false) {
                // K√≠ch ho·∫°t l·∫°i n√∫t ki·ªÉm tra
                checkBtn.disabled = false;
                checkBtn.classList.remove('disabled-input', 'opacity-50');
                
                quizResult.classList.add('hidden');
                quizResult.textContent = '';

                quizItems.forEach(item => {
                    const feedbackElement = item.querySelector('.feedback');
                    
                    // Reset styling v√† feedback
                    feedbackElement.textContent = '';
                    feedbackElement.classList.remove('text-green-600', 'text-red-600');
                    
                    if (item.getAttribute('data-type') === 'mcq') {
                        item.querySelectorAll('.mcq-option').forEach(opt => {
                            opt.classList.remove('selected-answer', 'correct-answer', 'incorrect-answer', 'disabled-option');
                        });
                    } else if (item.getAttribute('data-type') === 'numerical') {
                        const inputElement = item.querySelector('.q-input');
                        if (!keepInput) {
                           // X√≥a input n·∫øu kh√¥ng ph·∫£i tr∆∞·ªùng h·ª£p c·∫£nh b√°o b·ªè tr·ªëng
                           inputElement.value = '';
                        }
                        inputElement.classList.remove('correct-answer', 'incorrect-answer', 'disabled-input');
                        inputElement.removeAttribute('disabled');
                    }
                });
            }
        });
    </script>

</body>
</html>